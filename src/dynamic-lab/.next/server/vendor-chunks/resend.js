"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/resend";
exports.ids = ["vendor-chunks/resend"];
exports.modules = {

/***/ "(action-browser)/../../node_modules/resend/dist/index.mjs":
/*!************************************************!*\
  !*** ../../node_modules/resend/dist/index.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Resend: () => (/* binding */ Resend)\n/* harmony export */ });\n/* harmony import */ var svix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! svix */ \"(action-browser)/../../node_modules/svix/dist/index.js\");\n\n\n//#region package.json\nvar version = \"6.5.2\";\n\n//#endregion\n//#region src/common/utils/build-pagination-query.ts\n/**\n* Builds a query string from pagination options\n* @param options - Pagination options containing limit and either after or before (but not both)\n* @returns Query string (without leading '?') or empty string if no options\n*/\nfunction buildPaginationQuery(options) {\n\tconst searchParams = new URLSearchParams();\n\tif (options.limit !== void 0) searchParams.set(\"limit\", options.limit.toString());\n\tif (\"after\" in options && options.after !== void 0) searchParams.set(\"after\", options.after);\n\tif (\"before\" in options && options.before !== void 0) searchParams.set(\"before\", options.before);\n\treturn searchParams.toString();\n}\n\n//#endregion\n//#region src/api-keys/api-keys.ts\nvar ApiKeys = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload, options = {}) {\n\t\treturn await this.resend.post(\"/api-keys\", payload, options);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/api-keys?${queryString}` : \"/api-keys\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync remove(id) {\n\t\treturn await this.resend.delete(`/api-keys/${id}`);\n\t}\n};\n\n//#endregion\n//#region src/common/utils/parse-email-to-api-options.ts\nfunction parseAttachments(attachments) {\n\treturn attachments?.map((attachment) => ({\n\t\tcontent: attachment.content,\n\t\tfilename: attachment.filename,\n\t\tpath: attachment.path,\n\t\tcontent_type: attachment.contentType,\n\t\tcontent_id: attachment.contentId\n\t}));\n}\nfunction parseEmailToApiOptions(email) {\n\treturn {\n\t\tattachments: parseAttachments(email.attachments),\n\t\tbcc: email.bcc,\n\t\tcc: email.cc,\n\t\tfrom: email.from,\n\t\theaders: email.headers,\n\t\thtml: email.html,\n\t\treply_to: email.replyTo,\n\t\tscheduled_at: email.scheduledAt,\n\t\tsubject: email.subject,\n\t\ttags: email.tags,\n\t\ttext: email.text,\n\t\tto: email.to,\n\t\ttemplate: email.template ? {\n\t\t\tid: email.template.id,\n\t\t\tvariables: email.template.variables\n\t\t} : void 0,\n\t\ttopic_id: email.topicId\n\t};\n}\n\n//#endregion\n//#region src/render.ts\nasync function render(node) {\n\tlet render$1;\n\ttry {\n\t\t({render: render$1} = await __webpack_require__.e(/*! import() */ \"_7e82\").then(__webpack_require__.t.bind(__webpack_require__, /*! @react-email/render */ \"?7e82\", 19)));\n\t} catch {\n\t\tthrow new Error(\"Failed to render React component. Make sure to install `@react-email/render` or `@react-email/components`.\");\n\t}\n\treturn render$1(node);\n}\n\n//#endregion\n//#region src/batch/batch.ts\nvar Batch = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync send(payload, options) {\n\t\treturn this.create(payload, options);\n\t}\n\tasync create(payload, options) {\n\t\tconst emails = [];\n\t\tfor (const email of payload) {\n\t\t\tif (email.react) {\n\t\t\t\temail.html = await render(email.react);\n\t\t\t\temail.react = void 0;\n\t\t\t}\n\t\t\temails.push(parseEmailToApiOptions(email));\n\t\t}\n\t\treturn await this.resend.post(\"/emails/batch\", emails, {\n\t\t\t...options,\n\t\t\theaders: {\n\t\t\t\t\"x-batch-validation\": options?.batchValidation ?? \"strict\",\n\t\t\t\t...options?.headers\n\t\t\t}\n\t\t});\n\t}\n};\n\n//#endregion\n//#region src/broadcasts/broadcasts.ts\nvar Broadcasts = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload, options = {}) {\n\t\tif (payload.react) payload.html = await render(payload.react);\n\t\treturn await this.resend.post(\"/broadcasts\", {\n\t\t\tname: payload.name,\n\t\t\tsegment_id: payload.segmentId,\n\t\t\taudience_id: payload.audienceId,\n\t\t\tpreview_text: payload.previewText,\n\t\t\tfrom: payload.from,\n\t\t\thtml: payload.html,\n\t\t\treply_to: payload.replyTo,\n\t\t\tsubject: payload.subject,\n\t\t\ttext: payload.text,\n\t\t\ttopic_id: payload.topicId\n\t\t}, options);\n\t}\n\tasync send(id, payload) {\n\t\treturn await this.resend.post(`/broadcasts/${id}/send`, { scheduled_at: payload?.scheduledAt });\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/broadcasts?${queryString}` : \"/broadcasts\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/broadcasts/${id}`);\n\t}\n\tasync remove(id) {\n\t\treturn await this.resend.delete(`/broadcasts/${id}`);\n\t}\n\tasync update(id, payload) {\n\t\tif (payload.react) payload.html = await render(payload.react);\n\t\treturn await this.resend.patch(`/broadcasts/${id}`, {\n\t\t\tname: payload.name,\n\t\t\tsegment_id: payload.segmentId,\n\t\t\taudience_id: payload.audienceId,\n\t\t\tfrom: payload.from,\n\t\t\thtml: payload.html,\n\t\t\ttext: payload.text,\n\t\t\tsubject: payload.subject,\n\t\t\treply_to: payload.replyTo,\n\t\t\tpreview_text: payload.previewText,\n\t\t\ttopic_id: payload.topicId\n\t\t});\n\t}\n};\n\n//#endregion\n//#region src/common/utils/parse-contact-properties-to-api-options.ts\nfunction parseContactPropertyFromApi(contactProperty) {\n\treturn {\n\t\tid: contactProperty.id,\n\t\tkey: contactProperty.key,\n\t\tcreatedAt: contactProperty.created_at,\n\t\ttype: contactProperty.type,\n\t\tfallbackValue: contactProperty.fallback_value\n\t};\n}\nfunction parseContactPropertyToApiOptions(contactProperty) {\n\tif (\"key\" in contactProperty) return {\n\t\tkey: contactProperty.key,\n\t\ttype: contactProperty.type,\n\t\tfallback_value: contactProperty.fallbackValue\n\t};\n\treturn { fallback_value: contactProperty.fallbackValue };\n}\n\n//#endregion\n//#region src/contact-properties/contact-properties.ts\nvar ContactProperties = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(options) {\n\t\tconst apiOptions = parseContactPropertyToApiOptions(options);\n\t\treturn await this.resend.post(\"/contact-properties\", apiOptions);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/contact-properties?${queryString}` : \"/contact-properties\";\n\t\tconst response = await this.resend.get(url);\n\t\tif (response.data) return {\n\t\t\tdata: {\n\t\t\t\t...response.data,\n\t\t\t\tdata: response.data.data.map((apiContactProperty) => parseContactPropertyFromApi(apiContactProperty))\n\t\t\t},\n\t\t\theaders: response.headers,\n\t\t\terror: null\n\t\t};\n\t\treturn response;\n\t}\n\tasync get(id) {\n\t\tif (!id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst response = await this.resend.get(`/contact-properties/${id}`);\n\t\tif (response.data) return {\n\t\t\tdata: {\n\t\t\t\tobject: \"contact_property\",\n\t\t\t\t...parseContactPropertyFromApi(response.data)\n\t\t\t},\n\t\t\theaders: response.headers,\n\t\t\terror: null\n\t\t};\n\t\treturn response;\n\t}\n\tasync update(payload) {\n\t\tif (!payload.id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst apiOptions = parseContactPropertyToApiOptions(payload);\n\t\treturn await this.resend.patch(`/contact-properties/${payload.id}`, apiOptions);\n\t}\n\tasync remove(id) {\n\t\tif (!id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\treturn await this.resend.delete(`/contact-properties/${id}`);\n\t}\n};\n\n//#endregion\n//#region src/contacts/segments/contact-segments.ts\nvar ContactSegments = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync list(options) {\n\t\tif (!options.contactId && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst identifier = options.email ? options.email : options.contactId;\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/contacts/${identifier}/segments?${queryString}` : `/contacts/${identifier}/segments`;\n\t\treturn await this.resend.get(url);\n\t}\n\tasync add(options) {\n\t\tif (!options.contactId && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst identifier = options.email ? options.email : options.contactId;\n\t\treturn this.resend.post(`/contacts/${identifier}/segments/${options.segmentId}`);\n\t}\n\tasync remove(options) {\n\t\tif (!options.contactId && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst identifier = options.email ? options.email : options.contactId;\n\t\treturn this.resend.delete(`/contacts/${identifier}/segments/${options.segmentId}`);\n\t}\n};\n\n//#endregion\n//#region src/contacts/topics/contact-topics.ts\nvar ContactTopics = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync update(payload) {\n\t\tif (!payload.id && !payload.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst identifier = payload.email ? payload.email : payload.id;\n\t\treturn this.resend.patch(`/contacts/${identifier}/topics`, payload.topics);\n\t}\n\tasync list(options) {\n\t\tif (!options.id && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst identifier = options.email ? options.email : options.id;\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/contacts/${identifier}/topics?${queryString}` : `/contacts/${identifier}/topics`;\n\t\treturn this.resend.get(url);\n\t}\n};\n\n//#endregion\n//#region src/contacts/contacts.ts\nvar Contacts = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t\tthis.topics = new ContactTopics(this.resend);\n\t\tthis.segments = new ContactSegments(this.resend);\n\t}\n\tasync create(payload, options = {}) {\n\t\tif (!payload.audienceId) return await this.resend.post(\"/contacts\", {\n\t\t\tunsubscribed: payload.unsubscribed,\n\t\t\temail: payload.email,\n\t\t\tfirst_name: payload.firstName,\n\t\t\tlast_name: payload.lastName,\n\t\t\tproperties: payload.properties\n\t\t}, options);\n\t\treturn await this.resend.post(`/audiences/${payload.audienceId}/contacts`, {\n\t\t\tunsubscribed: payload.unsubscribed,\n\t\t\temail: payload.email,\n\t\t\tfirst_name: payload.firstName,\n\t\t\tlast_name: payload.lastName,\n\t\t\tproperties: payload.properties\n\t\t}, options);\n\t}\n\tasync list(options = {}) {\n\t\tconst segmentId = options.segmentId ?? options.audienceId;\n\t\tif (!segmentId) {\n\t\t\tconst queryString$1 = buildPaginationQuery(options);\n\t\t\tconst url$1 = queryString$1 ? `/contacts?${queryString$1}` : \"/contacts\";\n\t\t\treturn await this.resend.get(url$1);\n\t\t}\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/segments/${segmentId}/contacts?${queryString}` : `/segments/${segmentId}/contacts`;\n\t\treturn await this.resend.get(url);\n\t}\n\tasync get(options) {\n\t\tif (typeof options === \"string\") return this.resend.get(`/contacts/${options}`);\n\t\tif (!options.id && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tif (!options.audienceId) return this.resend.get(`/contacts/${options?.email ? options?.email : options?.id}`);\n\t\treturn this.resend.get(`/audiences/${options.audienceId}/contacts/${options?.email ? options?.email : options?.id}`);\n\t}\n\tasync update(options) {\n\t\tif (!options.id && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tif (!options.audienceId) return await this.resend.patch(`/contacts/${options?.email ? options?.email : options?.id}`, {\n\t\t\tunsubscribed: options.unsubscribed,\n\t\t\tfirst_name: options.firstName,\n\t\t\tlast_name: options.lastName,\n\t\t\tproperties: options.properties\n\t\t});\n\t\treturn await this.resend.patch(`/audiences/${options.audienceId}/contacts/${options?.email ? options?.email : options?.id}`, {\n\t\t\tunsubscribed: options.unsubscribed,\n\t\t\tfirst_name: options.firstName,\n\t\t\tlast_name: options.lastName,\n\t\t\tproperties: options.properties\n\t\t});\n\t}\n\tasync remove(payload) {\n\t\tif (typeof payload === \"string\") return this.resend.delete(`/contacts/${payload}`);\n\t\tif (!payload.id && !payload.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tif (!payload.audienceId) return this.resend.delete(`/contacts/${payload?.email ? payload?.email : payload?.id}`);\n\t\treturn this.resend.delete(`/audiences/${payload.audienceId}/contacts/${payload?.email ? payload?.email : payload?.id}`);\n\t}\n};\n\n//#endregion\n//#region src/common/utils/parse-domain-to-api-options.ts\nfunction parseDomainToApiOptions(domain) {\n\treturn {\n\t\tname: domain.name,\n\t\tregion: domain.region,\n\t\tcustom_return_path: domain.customReturnPath,\n\t\tcapabilities: domain.capabilities\n\t};\n}\n\n//#endregion\n//#region src/domains/domains.ts\nvar Domains = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload, options = {}) {\n\t\treturn await this.resend.post(\"/domains\", parseDomainToApiOptions(payload), options);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/domains?${queryString}` : \"/domains\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/domains/${id}`);\n\t}\n\tasync update(payload) {\n\t\treturn await this.resend.patch(`/domains/${payload.id}`, {\n\t\t\tclick_tracking: payload.clickTracking,\n\t\t\topen_tracking: payload.openTracking,\n\t\t\ttls: payload.tls,\n\t\t\tcapabilities: payload.capabilities\n\t\t});\n\t}\n\tasync remove(id) {\n\t\treturn await this.resend.delete(`/domains/${id}`);\n\t}\n\tasync verify(id) {\n\t\treturn await this.resend.post(`/domains/${id}/verify`);\n\t}\n};\n\n//#endregion\n//#region src/emails/attachments/attachments.ts\nvar Attachments = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync get(options) {\n\t\tconst { emailId, id } = options;\n\t\treturn await this.resend.get(`/emails/${emailId}/attachments/${id}`);\n\t}\n\tasync list(options) {\n\t\tconst { emailId } = options;\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/emails/${emailId}/attachments?${queryString}` : `/emails/${emailId}/attachments`;\n\t\treturn await this.resend.get(url);\n\t}\n};\n\n//#endregion\n//#region src/emails/receiving/attachments/attachments.ts\nvar Attachments$1 = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync get(options) {\n\t\tconst { emailId, id } = options;\n\t\treturn await this.resend.get(`/emails/receiving/${emailId}/attachments/${id}`);\n\t}\n\tasync list(options) {\n\t\tconst { emailId } = options;\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/emails/receiving/${emailId}/attachments?${queryString}` : `/emails/receiving/${emailId}/attachments`;\n\t\treturn await this.resend.get(url);\n\t}\n};\n\n//#endregion\n//#region src/emails/receiving/receiving.ts\nvar Receiving = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t\tthis.attachments = new Attachments$1(resend);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/emails/receiving/${id}`);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/emails/receiving?${queryString}` : \"/emails/receiving\";\n\t\treturn await this.resend.get(url);\n\t}\n};\n\n//#endregion\n//#region src/emails/emails.ts\nvar Emails = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t\tthis.attachments = new Attachments(resend);\n\t\tthis.receiving = new Receiving(resend);\n\t}\n\tasync send(payload, options = {}) {\n\t\treturn this.create(payload, options);\n\t}\n\tasync create(payload, options = {}) {\n\t\tif (payload.react) payload.html = await render(payload.react);\n\t\treturn await this.resend.post(\"/emails\", parseEmailToApiOptions(payload), options);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/emails/${id}`);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/emails?${queryString}` : \"/emails\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync update(payload) {\n\t\treturn await this.resend.patch(`/emails/${payload.id}`, { scheduled_at: payload.scheduledAt });\n\t}\n\tasync cancel(id) {\n\t\treturn await this.resend.post(`/emails/${id}/cancel`);\n\t}\n};\n\n//#endregion\n//#region src/segments/segments.ts\nvar Segments = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload, options = {}) {\n\t\treturn await this.resend.post(\"/segments\", payload, options);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/segments?${queryString}` : \"/segments\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/segments/${id}`);\n\t}\n\tasync remove(id) {\n\t\treturn await this.resend.delete(`/segments/${id}`);\n\t}\n};\n\n//#endregion\n//#region src/common/utils/get-pagination-query-properties.ts\nfunction getPaginationQueryProperties(options = {}) {\n\tconst query = new URLSearchParams();\n\tif (options.before) query.set(\"before\", options.before);\n\tif (options.after) query.set(\"after\", options.after);\n\tif (options.limit) query.set(\"limit\", options.limit.toString());\n\treturn query.size > 0 ? `?${query.toString()}` : \"\";\n}\n\n//#endregion\n//#region src/common/utils/parse-template-to-api-options.ts\nfunction parseVariables(variables) {\n\treturn variables?.map((variable) => ({\n\t\tkey: variable.key,\n\t\ttype: variable.type,\n\t\tfallback_value: variable.fallbackValue\n\t}));\n}\nfunction parseTemplateToApiOptions(template) {\n\treturn {\n\t\tname: \"name\" in template ? template.name : void 0,\n\t\tsubject: template.subject,\n\t\thtml: template.html,\n\t\ttext: template.text,\n\t\talias: template.alias,\n\t\tfrom: template.from,\n\t\treply_to: template.replyTo,\n\t\tvariables: parseVariables(template.variables)\n\t};\n}\n\n//#endregion\n//#region src/templates/chainable-template-result.ts\nvar ChainableTemplateResult = class {\n\tconstructor(promise, publishFn) {\n\t\tthis.promise = promise;\n\t\tthis.publishFn = publishFn;\n\t}\n\tthen(onfulfilled, onrejected) {\n\t\treturn this.promise.then(onfulfilled, onrejected);\n\t}\n\tasync publish() {\n\t\tconst { data, error } = await this.promise;\n\t\tif (error) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror\n\t\t};\n\t\treturn this.publishFn(data.id);\n\t}\n};\n\n//#endregion\n//#region src/templates/templates.ts\nvar Templates = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tcreate(payload) {\n\t\treturn new ChainableTemplateResult(this.performCreate(payload), this.publish.bind(this));\n\t}\n\tasync performCreate(payload) {\n\t\tif (payload.react) {\n\t\t\tif (!this.renderAsync) try {\n\t\t\t\tconst { renderAsync } = await __webpack_require__.e(/*! import() */ \"_7e82\").then(__webpack_require__.t.bind(__webpack_require__, /*! @react-email/render */ \"?7e82\", 19));\n\t\t\t\tthis.renderAsync = renderAsync;\n\t\t\t} catch {\n\t\t\t\tthrow new Error(\"Failed to render React component. Make sure to install `@react-email/render`\");\n\t\t\t}\n\t\t\tpayload.html = await this.renderAsync(payload.react);\n\t\t}\n\t\treturn this.resend.post(\"/templates\", parseTemplateToApiOptions(payload));\n\t}\n\tasync remove(identifier) {\n\t\treturn await this.resend.delete(`/templates/${identifier}`);\n\t}\n\tasync get(identifier) {\n\t\treturn await this.resend.get(`/templates/${identifier}`);\n\t}\n\tasync list(options = {}) {\n\t\treturn this.resend.get(`/templates${getPaginationQueryProperties(options)}`);\n\t}\n\tduplicate(identifier) {\n\t\treturn new ChainableTemplateResult(this.resend.post(`/templates/${identifier}/duplicate`), this.publish.bind(this));\n\t}\n\tasync publish(identifier) {\n\t\treturn await this.resend.post(`/templates/${identifier}/publish`);\n\t}\n\tasync update(identifier, payload) {\n\t\treturn await this.resend.patch(`/templates/${identifier}`, parseTemplateToApiOptions(payload));\n\t}\n};\n\n//#endregion\n//#region src/topics/topics.ts\nvar Topics = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload) {\n\t\tconst { defaultSubscription, ...body } = payload;\n\t\treturn await this.resend.post(\"/topics\", {\n\t\t\t...body,\n\t\t\tdefault_subscription: defaultSubscription\n\t\t});\n\t}\n\tasync list() {\n\t\treturn await this.resend.get(\"/topics\");\n\t}\n\tasync get(id) {\n\t\tif (!id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\treturn await this.resend.get(`/topics/${id}`);\n\t}\n\tasync update(payload) {\n\t\tif (!payload.id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\treturn await this.resend.patch(`/topics/${payload.id}`, payload);\n\t}\n\tasync remove(id) {\n\t\tif (!id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\treturn await this.resend.delete(`/topics/${id}`);\n\t}\n};\n\n//#endregion\n//#region src/webhooks/webhooks.ts\nvar Webhooks = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload, options = {}) {\n\t\treturn await this.resend.post(\"/webhooks\", payload, options);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/webhooks/${id}`);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/webhooks?${queryString}` : \"/webhooks\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync update(id, payload) {\n\t\treturn await this.resend.patch(`/webhooks/${id}`, payload);\n\t}\n\tasync remove(id) {\n\t\treturn await this.resend.delete(`/webhooks/${id}`);\n\t}\n\tverify(payload) {\n\t\treturn new svix__WEBPACK_IMPORTED_MODULE_0__.Webhook(payload.webhookSecret).verify(payload.payload, {\n\t\t\t\"svix-id\": payload.headers.id,\n\t\t\t\"svix-timestamp\": payload.headers.timestamp,\n\t\t\t\"svix-signature\": payload.headers.signature\n\t\t});\n\t}\n};\n\n//#endregion\n//#region src/resend.ts\nconst defaultBaseUrl = \"https://api.resend.com\";\nconst defaultUserAgent = `resend-node:${version}`;\nconst baseUrl = typeof process !== \"undefined\" && process.env ? process.env.RESEND_BASE_URL || defaultBaseUrl : defaultBaseUrl;\nconst userAgent = typeof process !== \"undefined\" && process.env ? process.env.RESEND_USER_AGENT || defaultUserAgent : defaultUserAgent;\nvar Resend = class {\n\tconstructor(key) {\n\t\tthis.key = key;\n\t\tthis.apiKeys = new ApiKeys(this);\n\t\tthis.segments = new Segments(this);\n\t\tthis.audiences = this.segments;\n\t\tthis.batch = new Batch(this);\n\t\tthis.broadcasts = new Broadcasts(this);\n\t\tthis.contacts = new Contacts(this);\n\t\tthis.contactProperties = new ContactProperties(this);\n\t\tthis.domains = new Domains(this);\n\t\tthis.emails = new Emails(this);\n\t\tthis.webhooks = new Webhooks(this);\n\t\tthis.templates = new Templates(this);\n\t\tthis.topics = new Topics(this);\n\t\tif (!key) {\n\t\t\tif (typeof process !== \"undefined\" && process.env) this.key = process.env.RESEND_API_KEY;\n\t\t\tif (!this.key) throw new Error(\"Missing API key. Pass it to the constructor `new Resend(\\\"re_123\\\")`\");\n\t\t}\n\t\tthis.headers = new Headers({\n\t\t\tAuthorization: `Bearer ${this.key}`,\n\t\t\t\"User-Agent\": userAgent,\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t});\n\t}\n\tasync fetchRequest(path, options = {}) {\n\t\ttry {\n\t\t\tconst response = await fetch(`${baseUrl}${path}`, options);\n\t\t\tif (!response.ok) try {\n\t\t\t\tconst rawError = await response.text();\n\t\t\t\treturn {\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: JSON.parse(rawError),\n\t\t\t\t\theaders: Object.fromEntries(response.headers.entries())\n\t\t\t\t};\n\t\t\t} catch (err) {\n\t\t\t\tif (err instanceof SyntaxError) return {\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: {\n\t\t\t\t\t\tname: \"application_error\",\n\t\t\t\t\t\tstatusCode: response.status,\n\t\t\t\t\t\tmessage: \"Internal server error. We are unable to process your request right now, please try again later.\"\n\t\t\t\t\t},\n\t\t\t\t\theaders: Object.fromEntries(response.headers.entries())\n\t\t\t\t};\n\t\t\t\tconst error = {\n\t\t\t\t\tmessage: response.statusText,\n\t\t\t\t\tstatusCode: response.status,\n\t\t\t\t\tname: \"application_error\"\n\t\t\t\t};\n\t\t\t\tif (err instanceof Error) return {\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: {\n\t\t\t\t\t\t...error,\n\t\t\t\t\t\tmessage: err.message\n\t\t\t\t\t},\n\t\t\t\t\theaders: Object.fromEntries(response.headers.entries())\n\t\t\t\t};\n\t\t\t\treturn {\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror,\n\t\t\t\t\theaders: Object.fromEntries(response.headers.entries())\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tdata: await response.json(),\n\t\t\t\terror: null,\n\t\t\t\theaders: Object.fromEntries(response.headers.entries())\n\t\t\t};\n\t\t} catch {\n\t\t\treturn {\n\t\t\t\tdata: null,\n\t\t\t\terror: {\n\t\t\t\t\tname: \"application_error\",\n\t\t\t\t\tstatusCode: null,\n\t\t\t\t\tmessage: \"Unable to fetch data. The request could not be resolved.\"\n\t\t\t\t},\n\t\t\t\theaders: null\n\t\t\t};\n\t\t}\n\t}\n\tasync post(path, entity, options = {}) {\n\t\tconst headers = new Headers(this.headers);\n\t\tif (options.headers) for (const [key, value] of new Headers(options.headers).entries()) headers.set(key, value);\n\t\tif (options.idempotencyKey) headers.set(\"Idempotency-Key\", options.idempotencyKey);\n\t\tconst requestOptions = {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(entity),\n\t\t\t...options,\n\t\t\theaders\n\t\t};\n\t\treturn this.fetchRequest(path, requestOptions);\n\t}\n\tasync get(path, options = {}) {\n\t\tconst headers = new Headers(this.headers);\n\t\tif (options.headers) for (const [key, value] of new Headers(options.headers).entries()) headers.set(key, value);\n\t\tconst requestOptions = {\n\t\t\tmethod: \"GET\",\n\t\t\t...options,\n\t\t\theaders\n\t\t};\n\t\treturn this.fetchRequest(path, requestOptions);\n\t}\n\tasync put(path, entity, options = {}) {\n\t\tconst headers = new Headers(this.headers);\n\t\tif (options.headers) for (const [key, value] of new Headers(options.headers).entries()) headers.set(key, value);\n\t\tconst requestOptions = {\n\t\t\tmethod: \"PUT\",\n\t\t\tbody: JSON.stringify(entity),\n\t\t\t...options,\n\t\t\theaders\n\t\t};\n\t\treturn this.fetchRequest(path, requestOptions);\n\t}\n\tasync patch(path, entity, options = {}) {\n\t\tconst headers = new Headers(this.headers);\n\t\tif (options.headers) for (const [key, value] of new Headers(options.headers).entries()) headers.set(key, value);\n\t\tconst requestOptions = {\n\t\t\tmethod: \"PATCH\",\n\t\t\tbody: JSON.stringify(entity),\n\t\t\t...options,\n\t\t\theaders\n\t\t};\n\t\treturn this.fetchRequest(path, requestOptions);\n\t}\n\tasync delete(path, query) {\n\t\tconst requestOptions = {\n\t\t\tmethod: \"DELETE\",\n\t\t\tbody: JSON.stringify(query),\n\t\t\theaders: this.headers\n\t\t};\n\t\treturn this.fetchRequest(path, requestOptions);\n\t}\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uLi8uLi9ub2RlX21vZHVsZXMvcmVzZW5kL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQStCOztBQUUvQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSx5Q0FBeUMsWUFBWTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsR0FBRztBQUNsRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGtCQUFrQixRQUFRLDRJQUE2QjtBQUMzRCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsK0NBQStDLEdBQUcsVUFBVSxvQ0FBb0M7QUFDaEc7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSwyQ0FBMkMsWUFBWTtBQUN2RDtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsR0FBRztBQUNqRDtBQUNBO0FBQ0EsaURBQWlELEdBQUc7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELEdBQUc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0EsbURBQW1ELFlBQVk7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsR0FBRztBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxXQUFXO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsR0FBRztBQUM1RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxXQUFXLFlBQVksWUFBWSxpQkFBaUIsV0FBVztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxXQUFXLFlBQVksa0JBQWtCO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxXQUFXLFlBQVksa0JBQWtCO0FBQ2xGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxXQUFXO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFdBQVcsVUFBVSxZQUFZLGlCQUFpQixXQUFXO0FBQ3RHO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCw4Q0FBOEMsbUJBQW1CO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFVBQVUsWUFBWSxZQUFZLGlCQUFpQixVQUFVO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxRQUFRO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCw4Q0FBOEM7QUFDN0csdUNBQXVDLG1CQUFtQixZQUFZLDhDQUE4QztBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLDhDQUE4QztBQUNySDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCwrQ0FBK0MsbUJBQW1CLFlBQVksOENBQThDO0FBQzVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwwRUFBMEUsUUFBUTtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBa0UsOENBQThDO0FBQ2hILDBDQUEwQyxtQkFBbUIsWUFBWSw4Q0FBOEM7QUFDdkg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLHdDQUF3QyxZQUFZO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxHQUFHO0FBQzlDO0FBQ0E7QUFDQSw2Q0FBNkMsV0FBVztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsOENBQThDLEdBQUc7QUFDakQ7QUFDQTtBQUNBLDRDQUE0QyxHQUFHO0FBQy9DO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGNBQWM7QUFDeEIsMENBQTBDLFFBQVEsZUFBZSxHQUFHO0FBQ3BFO0FBQ0E7QUFDQSxVQUFVLFVBQVU7QUFDcEI7QUFDQSx1Q0FBdUMsUUFBUSxlQUFlLFlBQVksZUFBZSxRQUFRO0FBQ2pHO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsY0FBYztBQUN4QixvREFBb0QsUUFBUSxlQUFlLEdBQUc7QUFDOUU7QUFDQTtBQUNBLFVBQVUsVUFBVTtBQUNwQjtBQUNBLGlEQUFpRCxRQUFRLGVBQWUsWUFBWSx5QkFBeUIsUUFBUTtBQUNySDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxHQUFHO0FBQ3ZEO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0EsaURBQWlELFlBQVk7QUFDN0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxHQUFHO0FBQzdDO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0EsdUNBQXVDLFlBQVk7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFdBQVcsS0FBSyxtQ0FBbUM7QUFDL0Y7QUFDQTtBQUNBLDJDQUEyQyxHQUFHO0FBQzlDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQSx5Q0FBeUMsWUFBWTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsR0FBRztBQUMvQztBQUNBO0FBQ0EsK0NBQStDLEdBQUc7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlCQUFpQjtBQUM5Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxjQUFjO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjLFFBQVEsNElBQTZCO0FBQy9EO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELFdBQVc7QUFDM0Q7QUFDQTtBQUNBLDZDQUE2QyxXQUFXO0FBQ3hEO0FBQ0Esd0JBQXdCO0FBQ3hCLHNDQUFzQyxzQ0FBc0M7QUFDNUU7QUFDQTtBQUNBLG9FQUFvRSxXQUFXO0FBQy9FO0FBQ0E7QUFDQSw4Q0FBOEMsV0FBVztBQUN6RDtBQUNBO0FBQ0EsK0NBQStDLFdBQVc7QUFDMUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsK0JBQStCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLEdBQUc7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxXQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsR0FBRztBQUNoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsR0FBRztBQUMvQztBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLHlDQUF5QyxZQUFZO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxHQUFHO0FBQ2pEO0FBQ0E7QUFDQSwrQ0FBK0MsR0FBRztBQUNsRDtBQUNBO0FBQ0EsYUFBYSx5Q0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsUUFBUTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixTQUFTO0FBQ3JDO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQSxtQ0FBbUMsUUFBUSxFQUFFLEtBQUs7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vbm9kZV9tb2R1bGVzL3Jlc2VuZC9kaXN0L2luZGV4Lm1qcz9kNjI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFdlYmhvb2sgfSBmcm9tIFwic3ZpeFwiO1xuXG4vLyNyZWdpb24gcGFja2FnZS5qc29uXG52YXIgdmVyc2lvbiA9IFwiNi41LjJcIjtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2NvbW1vbi91dGlscy9idWlsZC1wYWdpbmF0aW9uLXF1ZXJ5LnRzXG4vKipcbiogQnVpbGRzIGEgcXVlcnkgc3RyaW5nIGZyb20gcGFnaW5hdGlvbiBvcHRpb25zXG4qIEBwYXJhbSBvcHRpb25zIC0gUGFnaW5hdGlvbiBvcHRpb25zIGNvbnRhaW5pbmcgbGltaXQgYW5kIGVpdGhlciBhZnRlciBvciBiZWZvcmUgKGJ1dCBub3QgYm90aClcbiogQHJldHVybnMgUXVlcnkgc3RyaW5nICh3aXRob3V0IGxlYWRpbmcgJz8nKSBvciBlbXB0eSBzdHJpbmcgaWYgbm8gb3B0aW9uc1xuKi9cbmZ1bmN0aW9uIGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpIHtcblx0Y29uc3Qgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuXHRpZiAob3B0aW9ucy5saW1pdCAhPT0gdm9pZCAwKSBzZWFyY2hQYXJhbXMuc2V0KFwibGltaXRcIiwgb3B0aW9ucy5saW1pdC50b1N0cmluZygpKTtcblx0aWYgKFwiYWZ0ZXJcIiBpbiBvcHRpb25zICYmIG9wdGlvbnMuYWZ0ZXIgIT09IHZvaWQgMCkgc2VhcmNoUGFyYW1zLnNldChcImFmdGVyXCIsIG9wdGlvbnMuYWZ0ZXIpO1xuXHRpZiAoXCJiZWZvcmVcIiBpbiBvcHRpb25zICYmIG9wdGlvbnMuYmVmb3JlICE9PSB2b2lkIDApIHNlYXJjaFBhcmFtcy5zZXQoXCJiZWZvcmVcIiwgb3B0aW9ucy5iZWZvcmUpO1xuXHRyZXR1cm4gc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCk7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9hcGkta2V5cy9hcGkta2V5cy50c1xudmFyIEFwaUtleXMgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHR9XG5cdGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcIi9hcGkta2V5c1wiLCBwYXlsb2FkLCBvcHRpb25zKTtcblx0fVxuXHRhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuXHRcdGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG5cdFx0Y29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2FwaS1rZXlzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2FwaS1rZXlzXCI7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuXHR9XG5cdGFzeW5jIHJlbW92ZShpZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5kZWxldGUoYC9hcGkta2V5cy8ke2lkfWApO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvY29tbW9uL3V0aWxzL3BhcnNlLWVtYWlsLXRvLWFwaS1vcHRpb25zLnRzXG5mdW5jdGlvbiBwYXJzZUF0dGFjaG1lbnRzKGF0dGFjaG1lbnRzKSB7XG5cdHJldHVybiBhdHRhY2htZW50cz8ubWFwKChhdHRhY2htZW50KSA9PiAoe1xuXHRcdGNvbnRlbnQ6IGF0dGFjaG1lbnQuY29udGVudCxcblx0XHRmaWxlbmFtZTogYXR0YWNobWVudC5maWxlbmFtZSxcblx0XHRwYXRoOiBhdHRhY2htZW50LnBhdGgsXG5cdFx0Y29udGVudF90eXBlOiBhdHRhY2htZW50LmNvbnRlbnRUeXBlLFxuXHRcdGNvbnRlbnRfaWQ6IGF0dGFjaG1lbnQuY29udGVudElkXG5cdH0pKTtcbn1cbmZ1bmN0aW9uIHBhcnNlRW1haWxUb0FwaU9wdGlvbnMoZW1haWwpIHtcblx0cmV0dXJuIHtcblx0XHRhdHRhY2htZW50czogcGFyc2VBdHRhY2htZW50cyhlbWFpbC5hdHRhY2htZW50cyksXG5cdFx0YmNjOiBlbWFpbC5iY2MsXG5cdFx0Y2M6IGVtYWlsLmNjLFxuXHRcdGZyb206IGVtYWlsLmZyb20sXG5cdFx0aGVhZGVyczogZW1haWwuaGVhZGVycyxcblx0XHRodG1sOiBlbWFpbC5odG1sLFxuXHRcdHJlcGx5X3RvOiBlbWFpbC5yZXBseVRvLFxuXHRcdHNjaGVkdWxlZF9hdDogZW1haWwuc2NoZWR1bGVkQXQsXG5cdFx0c3ViamVjdDogZW1haWwuc3ViamVjdCxcblx0XHR0YWdzOiBlbWFpbC50YWdzLFxuXHRcdHRleHQ6IGVtYWlsLnRleHQsXG5cdFx0dG86IGVtYWlsLnRvLFxuXHRcdHRlbXBsYXRlOiBlbWFpbC50ZW1wbGF0ZSA/IHtcblx0XHRcdGlkOiBlbWFpbC50ZW1wbGF0ZS5pZCxcblx0XHRcdHZhcmlhYmxlczogZW1haWwudGVtcGxhdGUudmFyaWFibGVzXG5cdFx0fSA6IHZvaWQgMCxcblx0XHR0b3BpY19pZDogZW1haWwudG9waWNJZFxuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvcmVuZGVyLnRzXG5hc3luYyBmdW5jdGlvbiByZW5kZXIobm9kZSkge1xuXHRsZXQgcmVuZGVyJDE7XG5cdHRyeSB7XG5cdFx0KHtyZW5kZXI6IHJlbmRlciQxfSA9IGF3YWl0IGltcG9ydChcIkByZWFjdC1lbWFpbC9yZW5kZXJcIikpO1xuXHR9IGNhdGNoIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcmVuZGVyIFJlYWN0IGNvbXBvbmVudC4gTWFrZSBzdXJlIHRvIGluc3RhbGwgYEByZWFjdC1lbWFpbC9yZW5kZXJgIG9yIGBAcmVhY3QtZW1haWwvY29tcG9uZW50c2AuXCIpO1xuXHR9XG5cdHJldHVybiByZW5kZXIkMShub2RlKTtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2JhdGNoL2JhdGNoLnRzXG52YXIgQmF0Y2ggPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHR9XG5cdGFzeW5jIHNlbmQocGF5bG9hZCwgb3B0aW9ucykge1xuXHRcdHJldHVybiB0aGlzLmNyZWF0ZShwYXlsb2FkLCBvcHRpb25zKTtcblx0fVxuXHRhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucykge1xuXHRcdGNvbnN0IGVtYWlscyA9IFtdO1xuXHRcdGZvciAoY29uc3QgZW1haWwgb2YgcGF5bG9hZCkge1xuXHRcdFx0aWYgKGVtYWlsLnJlYWN0KSB7XG5cdFx0XHRcdGVtYWlsLmh0bWwgPSBhd2FpdCByZW5kZXIoZW1haWwucmVhY3QpO1xuXHRcdFx0XHRlbWFpbC5yZWFjdCA9IHZvaWQgMDtcblx0XHRcdH1cblx0XHRcdGVtYWlscy5wdXNoKHBhcnNlRW1haWxUb0FwaU9wdGlvbnMoZW1haWwpKTtcblx0XHR9XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXCIvZW1haWxzL2JhdGNoXCIsIGVtYWlscywge1xuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XCJ4LWJhdGNoLXZhbGlkYXRpb25cIjogb3B0aW9ucz8uYmF0Y2hWYWxpZGF0aW9uID8/IFwic3RyaWN0XCIsXG5cdFx0XHRcdC4uLm9wdGlvbnM/LmhlYWRlcnNcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2Jyb2FkY2FzdHMvYnJvYWRjYXN0cy50c1xudmFyIEJyb2FkY2FzdHMgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHR9XG5cdGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcblx0XHRpZiAocGF5bG9hZC5yZWFjdCkgcGF5bG9hZC5odG1sID0gYXdhaXQgcmVuZGVyKHBheWxvYWQucmVhY3QpO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFwiL2Jyb2FkY2FzdHNcIiwge1xuXHRcdFx0bmFtZTogcGF5bG9hZC5uYW1lLFxuXHRcdFx0c2VnbWVudF9pZDogcGF5bG9hZC5zZWdtZW50SWQsXG5cdFx0XHRhdWRpZW5jZV9pZDogcGF5bG9hZC5hdWRpZW5jZUlkLFxuXHRcdFx0cHJldmlld190ZXh0OiBwYXlsb2FkLnByZXZpZXdUZXh0LFxuXHRcdFx0ZnJvbTogcGF5bG9hZC5mcm9tLFxuXHRcdFx0aHRtbDogcGF5bG9hZC5odG1sLFxuXHRcdFx0cmVwbHlfdG86IHBheWxvYWQucmVwbHlUbyxcblx0XHRcdHN1YmplY3Q6IHBheWxvYWQuc3ViamVjdCxcblx0XHRcdHRleHQ6IHBheWxvYWQudGV4dCxcblx0XHRcdHRvcGljX2lkOiBwYXlsb2FkLnRvcGljSWRcblx0XHR9LCBvcHRpb25zKTtcblx0fVxuXHRhc3luYyBzZW5kKGlkLCBwYXlsb2FkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoYC9icm9hZGNhc3RzLyR7aWR9L3NlbmRgLCB7IHNjaGVkdWxlZF9hdDogcGF5bG9hZD8uc2NoZWR1bGVkQXQgfSk7XG5cdH1cblx0YXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcblx0XHRjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuXHRcdGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9icm9hZGNhc3RzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2Jyb2FkY2FzdHNcIjtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG5cdH1cblx0YXN5bmMgZ2V0KGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldChgL2Jyb2FkY2FzdHMvJHtpZH1gKTtcblx0fVxuXHRhc3luYyByZW1vdmUoaWQpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKGAvYnJvYWRjYXN0cy8ke2lkfWApO1xuXHR9XG5cdGFzeW5jIHVwZGF0ZShpZCwgcGF5bG9hZCkge1xuXHRcdGlmIChwYXlsb2FkLnJlYWN0KSBwYXlsb2FkLmh0bWwgPSBhd2FpdCByZW5kZXIocGF5bG9hZC5yZWFjdCk7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKGAvYnJvYWRjYXN0cy8ke2lkfWAsIHtcblx0XHRcdG5hbWU6IHBheWxvYWQubmFtZSxcblx0XHRcdHNlZ21lbnRfaWQ6IHBheWxvYWQuc2VnbWVudElkLFxuXHRcdFx0YXVkaWVuY2VfaWQ6IHBheWxvYWQuYXVkaWVuY2VJZCxcblx0XHRcdGZyb206IHBheWxvYWQuZnJvbSxcblx0XHRcdGh0bWw6IHBheWxvYWQuaHRtbCxcblx0XHRcdHRleHQ6IHBheWxvYWQudGV4dCxcblx0XHRcdHN1YmplY3Q6IHBheWxvYWQuc3ViamVjdCxcblx0XHRcdHJlcGx5X3RvOiBwYXlsb2FkLnJlcGx5VG8sXG5cdFx0XHRwcmV2aWV3X3RleHQ6IHBheWxvYWQucHJldmlld1RleHQsXG5cdFx0XHR0b3BpY19pZDogcGF5bG9hZC50b3BpY0lkXG5cdFx0fSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9jb21tb24vdXRpbHMvcGFyc2UtY29udGFjdC1wcm9wZXJ0aWVzLXRvLWFwaS1vcHRpb25zLnRzXG5mdW5jdGlvbiBwYXJzZUNvbnRhY3RQcm9wZXJ0eUZyb21BcGkoY29udGFjdFByb3BlcnR5KSB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IGNvbnRhY3RQcm9wZXJ0eS5pZCxcblx0XHRrZXk6IGNvbnRhY3RQcm9wZXJ0eS5rZXksXG5cdFx0Y3JlYXRlZEF0OiBjb250YWN0UHJvcGVydHkuY3JlYXRlZF9hdCxcblx0XHR0eXBlOiBjb250YWN0UHJvcGVydHkudHlwZSxcblx0XHRmYWxsYmFja1ZhbHVlOiBjb250YWN0UHJvcGVydHkuZmFsbGJhY2tfdmFsdWVcblx0fTtcbn1cbmZ1bmN0aW9uIHBhcnNlQ29udGFjdFByb3BlcnR5VG9BcGlPcHRpb25zKGNvbnRhY3RQcm9wZXJ0eSkge1xuXHRpZiAoXCJrZXlcIiBpbiBjb250YWN0UHJvcGVydHkpIHJldHVybiB7XG5cdFx0a2V5OiBjb250YWN0UHJvcGVydHkua2V5LFxuXHRcdHR5cGU6IGNvbnRhY3RQcm9wZXJ0eS50eXBlLFxuXHRcdGZhbGxiYWNrX3ZhbHVlOiBjb250YWN0UHJvcGVydHkuZmFsbGJhY2tWYWx1ZVxuXHR9O1xuXHRyZXR1cm4geyBmYWxsYmFja192YWx1ZTogY29udGFjdFByb3BlcnR5LmZhbGxiYWNrVmFsdWUgfTtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2NvbnRhY3QtcHJvcGVydGllcy9jb250YWN0LXByb3BlcnRpZXMudHNcbnZhciBDb250YWN0UHJvcGVydGllcyA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocmVzZW5kKSB7XG5cdFx0dGhpcy5yZXNlbmQgPSByZXNlbmQ7XG5cdH1cblx0YXN5bmMgY3JlYXRlKG9wdGlvbnMpIHtcblx0XHRjb25zdCBhcGlPcHRpb25zID0gcGFyc2VDb250YWN0UHJvcGVydHlUb0FwaU9wdGlvbnMob3B0aW9ucyk7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXCIvY29udGFjdC1wcm9wZXJ0aWVzXCIsIGFwaU9wdGlvbnMpO1xuXHR9XG5cdGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcblx0XHRjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvY29udGFjdC1wcm9wZXJ0aWVzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2NvbnRhY3QtcHJvcGVydGllc1wiO1xuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG5cdFx0aWYgKHJlc3BvbnNlLmRhdGEpIHJldHVybiB7XG5cdFx0XHRkYXRhOiB7XG5cdFx0XHRcdC4uLnJlc3BvbnNlLmRhdGEsXG5cdFx0XHRcdGRhdGE6IHJlc3BvbnNlLmRhdGEuZGF0YS5tYXAoKGFwaUNvbnRhY3RQcm9wZXJ0eSkgPT4gcGFyc2VDb250YWN0UHJvcGVydHlGcm9tQXBpKGFwaUNvbnRhY3RQcm9wZXJ0eSkpXG5cdFx0XHR9LFxuXHRcdFx0aGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcblx0XHRcdGVycm9yOiBudWxsXG5cdFx0fTtcblx0XHRyZXR1cm4gcmVzcG9uc2U7XG5cdH1cblx0YXN5bmMgZ2V0KGlkKSB7XG5cdFx0aWYgKCFpZCkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRoZWFkZXJzOiBudWxsLFxuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0bWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChgL2NvbnRhY3QtcHJvcGVydGllcy8ke2lkfWApO1xuXHRcdGlmIChyZXNwb25zZS5kYXRhKSByZXR1cm4ge1xuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRvYmplY3Q6IFwiY29udGFjdF9wcm9wZXJ0eVwiLFxuXHRcdFx0XHQuLi5wYXJzZUNvbnRhY3RQcm9wZXJ0eUZyb21BcGkocmVzcG9uc2UuZGF0YSlcblx0XHRcdH0sXG5cdFx0XHRoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzLFxuXHRcdFx0ZXJyb3I6IG51bGxcblx0XHR9O1xuXHRcdHJldHVybiByZXNwb25zZTtcblx0fVxuXHRhc3luYyB1cGRhdGUocGF5bG9hZCkge1xuXHRcdGlmICghcGF5bG9hZC5pZCkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRoZWFkZXJzOiBudWxsLFxuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0bWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb25zdCBhcGlPcHRpb25zID0gcGFyc2VDb250YWN0UHJvcGVydHlUb0FwaU9wdGlvbnMocGF5bG9hZCk7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKGAvY29udGFjdC1wcm9wZXJ0aWVzLyR7cGF5bG9hZC5pZH1gLCBhcGlPcHRpb25zKTtcblx0fVxuXHRhc3luYyByZW1vdmUoaWQpIHtcblx0XHRpZiAoIWlkKSByZXR1cm4ge1xuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGhlYWRlcnM6IG51bGwsXG5cdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBmaWVsZC5cIixcblx0XHRcdFx0c3RhdHVzQ29kZTogbnVsbCxcblx0XHRcdFx0bmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcblx0XHRcdH1cblx0XHR9O1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5kZWxldGUoYC9jb250YWN0LXByb3BlcnRpZXMvJHtpZH1gKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2NvbnRhY3RzL3NlZ21lbnRzL2NvbnRhY3Qtc2VnbWVudHMudHNcbnZhciBDb250YWN0U2VnbWVudHMgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHR9XG5cdGFzeW5jIGxpc3Qob3B0aW9ucykge1xuXHRcdGlmICghb3B0aW9ucy5jb250YWN0SWQgJiYgIW9wdGlvbnMuZW1haWwpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb25zdCBpZGVudGlmaWVyID0gb3B0aW9ucy5lbWFpbCA/IG9wdGlvbnMuZW1haWwgOiBvcHRpb25zLmNvbnRhY3RJZDtcblx0XHRjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuXHRcdGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9jb250YWN0cy8ke2lkZW50aWZpZXJ9L3NlZ21lbnRzPyR7cXVlcnlTdHJpbmd9YCA6IGAvY29udGFjdHMvJHtpZGVudGlmaWVyfS9zZWdtZW50c2A7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuXHR9XG5cdGFzeW5jIGFkZChvcHRpb25zKSB7XG5cdFx0aWYgKCFvcHRpb25zLmNvbnRhY3RJZCAmJiAhb3B0aW9ucy5lbWFpbCkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRoZWFkZXJzOiBudWxsLFxuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0bWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcblx0XHRcdFx0c3RhdHVzQ29kZTogbnVsbCxcblx0XHRcdFx0bmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcblx0XHRcdH1cblx0XHR9O1xuXHRcdGNvbnN0IGlkZW50aWZpZXIgPSBvcHRpb25zLmVtYWlsID8gb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMuY29udGFjdElkO1xuXHRcdHJldHVybiB0aGlzLnJlc2VuZC5wb3N0KGAvY29udGFjdHMvJHtpZGVudGlmaWVyfS9zZWdtZW50cy8ke29wdGlvbnMuc2VnbWVudElkfWApO1xuXHR9XG5cdGFzeW5jIHJlbW92ZShvcHRpb25zKSB7XG5cdFx0aWYgKCFvcHRpb25zLmNvbnRhY3RJZCAmJiAhb3B0aW9ucy5lbWFpbCkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRoZWFkZXJzOiBudWxsLFxuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0bWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcblx0XHRcdFx0c3RhdHVzQ29kZTogbnVsbCxcblx0XHRcdFx0bmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcblx0XHRcdH1cblx0XHR9O1xuXHRcdGNvbnN0IGlkZW50aWZpZXIgPSBvcHRpb25zLmVtYWlsID8gb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMuY29udGFjdElkO1xuXHRcdHJldHVybiB0aGlzLnJlc2VuZC5kZWxldGUoYC9jb250YWN0cy8ke2lkZW50aWZpZXJ9L3NlZ21lbnRzLyR7b3B0aW9ucy5zZWdtZW50SWR9YCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9jb250YWN0cy90b3BpY3MvY29udGFjdC10b3BpY3MudHNcbnZhciBDb250YWN0VG9waWNzID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0fVxuXHRhc3luYyB1cGRhdGUocGF5bG9hZCkge1xuXHRcdGlmICghcGF5bG9hZC5pZCAmJiAhcGF5bG9hZC5lbWFpbCkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRoZWFkZXJzOiBudWxsLFxuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0bWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcblx0XHRcdFx0c3RhdHVzQ29kZTogbnVsbCxcblx0XHRcdFx0bmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcblx0XHRcdH1cblx0XHR9O1xuXHRcdGNvbnN0IGlkZW50aWZpZXIgPSBwYXlsb2FkLmVtYWlsID8gcGF5bG9hZC5lbWFpbCA6IHBheWxvYWQuaWQ7XG5cdFx0cmV0dXJuIHRoaXMucmVzZW5kLnBhdGNoKGAvY29udGFjdHMvJHtpZGVudGlmaWVyfS90b3BpY3NgLCBwYXlsb2FkLnRvcGljcyk7XG5cdH1cblx0YXN5bmMgbGlzdChvcHRpb25zKSB7XG5cdFx0aWYgKCFvcHRpb25zLmlkICYmICFvcHRpb25zLmVtYWlsKSByZXR1cm4ge1xuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGhlYWRlcnM6IG51bGwsXG5cdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBvciBgZW1haWxgIGZpZWxkLlwiLFxuXHRcdFx0XHRzdGF0dXNDb2RlOiBudWxsLFxuXHRcdFx0XHRuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0Y29uc3QgaWRlbnRpZmllciA9IG9wdGlvbnMuZW1haWwgPyBvcHRpb25zLmVtYWlsIDogb3B0aW9ucy5pZDtcblx0XHRjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuXHRcdGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9jb250YWN0cy8ke2lkZW50aWZpZXJ9L3RvcGljcz8ke3F1ZXJ5U3RyaW5nfWAgOiBgL2NvbnRhY3RzLyR7aWRlbnRpZmllcn0vdG9waWNzYDtcblx0XHRyZXR1cm4gdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9jb250YWN0cy9jb250YWN0cy50c1xudmFyIENvbnRhY3RzID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0XHR0aGlzLnRvcGljcyA9IG5ldyBDb250YWN0VG9waWNzKHRoaXMucmVzZW5kKTtcblx0XHR0aGlzLnNlZ21lbnRzID0gbmV3IENvbnRhY3RTZWdtZW50cyh0aGlzLnJlc2VuZCk7XG5cdH1cblx0YXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuXHRcdGlmICghcGF5bG9hZC5hdWRpZW5jZUlkKSByZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcIi9jb250YWN0c1wiLCB7XG5cdFx0XHR1bnN1YnNjcmliZWQ6IHBheWxvYWQudW5zdWJzY3JpYmVkLFxuXHRcdFx0ZW1haWw6IHBheWxvYWQuZW1haWwsXG5cdFx0XHRmaXJzdF9uYW1lOiBwYXlsb2FkLmZpcnN0TmFtZSxcblx0XHRcdGxhc3RfbmFtZTogcGF5bG9hZC5sYXN0TmFtZSxcblx0XHRcdHByb3BlcnRpZXM6IHBheWxvYWQucHJvcGVydGllc1xuXHRcdH0sIG9wdGlvbnMpO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KGAvYXVkaWVuY2VzLyR7cGF5bG9hZC5hdWRpZW5jZUlkfS9jb250YWN0c2AsIHtcblx0XHRcdHVuc3Vic2NyaWJlZDogcGF5bG9hZC51bnN1YnNjcmliZWQsXG5cdFx0XHRlbWFpbDogcGF5bG9hZC5lbWFpbCxcblx0XHRcdGZpcnN0X25hbWU6IHBheWxvYWQuZmlyc3ROYW1lLFxuXHRcdFx0bGFzdF9uYW1lOiBwYXlsb2FkLmxhc3ROYW1lLFxuXHRcdFx0cHJvcGVydGllczogcGF5bG9hZC5wcm9wZXJ0aWVzXG5cdFx0fSwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcblx0XHRjb25zdCBzZWdtZW50SWQgPSBvcHRpb25zLnNlZ21lbnRJZCA/PyBvcHRpb25zLmF1ZGllbmNlSWQ7XG5cdFx0aWYgKCFzZWdtZW50SWQpIHtcblx0XHRcdGNvbnN0IHF1ZXJ5U3RyaW5nJDEgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcblx0XHRcdGNvbnN0IHVybCQxID0gcXVlcnlTdHJpbmckMSA/IGAvY29udGFjdHM/JHtxdWVyeVN0cmluZyQxfWAgOiBcIi9jb250YWN0c1wiO1xuXHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwkMSk7XG5cdFx0fVxuXHRcdGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG5cdFx0Y29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL3NlZ21lbnRzLyR7c2VnbWVudElkfS9jb250YWN0cz8ke3F1ZXJ5U3RyaW5nfWAgOiBgL3NlZ21lbnRzLyR7c2VnbWVudElkfS9jb250YWN0c2A7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuXHR9XG5cdGFzeW5jIGdldChvcHRpb25zKSB7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSByZXR1cm4gdGhpcy5yZXNlbmQuZ2V0KGAvY29udGFjdHMvJHtvcHRpb25zfWApO1xuXHRcdGlmICghb3B0aW9ucy5pZCAmJiAhb3B0aW9ucy5lbWFpbCkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRoZWFkZXJzOiBudWxsLFxuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0bWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcblx0XHRcdFx0c3RhdHVzQ29kZTogbnVsbCxcblx0XHRcdFx0bmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcblx0XHRcdH1cblx0XHR9O1xuXHRcdGlmICghb3B0aW9ucy5hdWRpZW5jZUlkKSByZXR1cm4gdGhpcy5yZXNlbmQuZ2V0KGAvY29udGFjdHMvJHtvcHRpb25zPy5lbWFpbCA/IG9wdGlvbnM/LmVtYWlsIDogb3B0aW9ucz8uaWR9YCk7XG5cdFx0cmV0dXJuIHRoaXMucmVzZW5kLmdldChgL2F1ZGllbmNlcy8ke29wdGlvbnMuYXVkaWVuY2VJZH0vY29udGFjdHMvJHtvcHRpb25zPy5lbWFpbCA/IG9wdGlvbnM/LmVtYWlsIDogb3B0aW9ucz8uaWR9YCk7XG5cdH1cblx0YXN5bmMgdXBkYXRlKG9wdGlvbnMpIHtcblx0XHRpZiAoIW9wdGlvbnMuaWQgJiYgIW9wdGlvbnMuZW1haWwpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRpZiAoIW9wdGlvbnMuYXVkaWVuY2VJZCkgcmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKGAvY29udGFjdHMvJHtvcHRpb25zPy5lbWFpbCA/IG9wdGlvbnM/LmVtYWlsIDogb3B0aW9ucz8uaWR9YCwge1xuXHRcdFx0dW5zdWJzY3JpYmVkOiBvcHRpb25zLnVuc3Vic2NyaWJlZCxcblx0XHRcdGZpcnN0X25hbWU6IG9wdGlvbnMuZmlyc3ROYW1lLFxuXHRcdFx0bGFzdF9uYW1lOiBvcHRpb25zLmxhc3ROYW1lLFxuXHRcdFx0cHJvcGVydGllczogb3B0aW9ucy5wcm9wZXJ0aWVzXG5cdFx0fSk7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKGAvYXVkaWVuY2VzLyR7b3B0aW9ucy5hdWRpZW5jZUlkfS9jb250YWN0cy8ke29wdGlvbnM/LmVtYWlsID8gb3B0aW9ucz8uZW1haWwgOiBvcHRpb25zPy5pZH1gLCB7XG5cdFx0XHR1bnN1YnNjcmliZWQ6IG9wdGlvbnMudW5zdWJzY3JpYmVkLFxuXHRcdFx0Zmlyc3RfbmFtZTogb3B0aW9ucy5maXJzdE5hbWUsXG5cdFx0XHRsYXN0X25hbWU6IG9wdGlvbnMubGFzdE5hbWUsXG5cdFx0XHRwcm9wZXJ0aWVzOiBvcHRpb25zLnByb3BlcnRpZXNcblx0XHR9KTtcblx0fVxuXHRhc3luYyByZW1vdmUocGF5bG9hZCkge1xuXHRcdGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHRoaXMucmVzZW5kLmRlbGV0ZShgL2NvbnRhY3RzLyR7cGF5bG9hZH1gKTtcblx0XHRpZiAoIXBheWxvYWQuaWQgJiYgIXBheWxvYWQuZW1haWwpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRpZiAoIXBheWxvYWQuYXVkaWVuY2VJZCkgcmV0dXJuIHRoaXMucmVzZW5kLmRlbGV0ZShgL2NvbnRhY3RzLyR7cGF5bG9hZD8uZW1haWwgPyBwYXlsb2FkPy5lbWFpbCA6IHBheWxvYWQ/LmlkfWApO1xuXHRcdHJldHVybiB0aGlzLnJlc2VuZC5kZWxldGUoYC9hdWRpZW5jZXMvJHtwYXlsb2FkLmF1ZGllbmNlSWR9L2NvbnRhY3RzLyR7cGF5bG9hZD8uZW1haWwgPyBwYXlsb2FkPy5lbWFpbCA6IHBheWxvYWQ/LmlkfWApO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvY29tbW9uL3V0aWxzL3BhcnNlLWRvbWFpbi10by1hcGktb3B0aW9ucy50c1xuZnVuY3Rpb24gcGFyc2VEb21haW5Ub0FwaU9wdGlvbnMoZG9tYWluKSB7XG5cdHJldHVybiB7XG5cdFx0bmFtZTogZG9tYWluLm5hbWUsXG5cdFx0cmVnaW9uOiBkb21haW4ucmVnaW9uLFxuXHRcdGN1c3RvbV9yZXR1cm5fcGF0aDogZG9tYWluLmN1c3RvbVJldHVyblBhdGgsXG5cdFx0Y2FwYWJpbGl0aWVzOiBkb21haW4uY2FwYWJpbGl0aWVzXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9kb21haW5zL2RvbWFpbnMudHNcbnZhciBEb21haW5zID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0fVxuXHRhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXCIvZG9tYWluc1wiLCBwYXJzZURvbWFpblRvQXBpT3B0aW9ucyhwYXlsb2FkKSwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcblx0XHRjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuXHRcdGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9kb21haW5zPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2RvbWFpbnNcIjtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG5cdH1cblx0YXN5bmMgZ2V0KGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldChgL2RvbWFpbnMvJHtpZH1gKTtcblx0fVxuXHRhc3luYyB1cGRhdGUocGF5bG9hZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChgL2RvbWFpbnMvJHtwYXlsb2FkLmlkfWAsIHtcblx0XHRcdGNsaWNrX3RyYWNraW5nOiBwYXlsb2FkLmNsaWNrVHJhY2tpbmcsXG5cdFx0XHRvcGVuX3RyYWNraW5nOiBwYXlsb2FkLm9wZW5UcmFja2luZyxcblx0XHRcdHRsczogcGF5bG9hZC50bHMsXG5cdFx0XHRjYXBhYmlsaXRpZXM6IHBheWxvYWQuY2FwYWJpbGl0aWVzXG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgcmVtb3ZlKGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShgL2RvbWFpbnMvJHtpZH1gKTtcblx0fVxuXHRhc3luYyB2ZXJpZnkoaWQpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChgL2RvbWFpbnMvJHtpZH0vdmVyaWZ5YCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9lbWFpbHMvYXR0YWNobWVudHMvYXR0YWNobWVudHMudHNcbnZhciBBdHRhY2htZW50cyA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocmVzZW5kKSB7XG5cdFx0dGhpcy5yZXNlbmQgPSByZXNlbmQ7XG5cdH1cblx0YXN5bmMgZ2V0KG9wdGlvbnMpIHtcblx0XHRjb25zdCB7IGVtYWlsSWQsIGlkIH0gPSBvcHRpb25zO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoYC9lbWFpbHMvJHtlbWFpbElkfS9hdHRhY2htZW50cy8ke2lkfWApO1xuXHR9XG5cdGFzeW5jIGxpc3Qob3B0aW9ucykge1xuXHRcdGNvbnN0IHsgZW1haWxJZCB9ID0gb3B0aW9ucztcblx0XHRjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuXHRcdGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9lbWFpbHMvJHtlbWFpbElkfS9hdHRhY2htZW50cz8ke3F1ZXJ5U3RyaW5nfWAgOiBgL2VtYWlscy8ke2VtYWlsSWR9L2F0dGFjaG1lbnRzYDtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9lbWFpbHMvcmVjZWl2aW5nL2F0dGFjaG1lbnRzL2F0dGFjaG1lbnRzLnRzXG52YXIgQXR0YWNobWVudHMkMSA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocmVzZW5kKSB7XG5cdFx0dGhpcy5yZXNlbmQgPSByZXNlbmQ7XG5cdH1cblx0YXN5bmMgZ2V0KG9wdGlvbnMpIHtcblx0XHRjb25zdCB7IGVtYWlsSWQsIGlkIH0gPSBvcHRpb25zO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoYC9lbWFpbHMvcmVjZWl2aW5nLyR7ZW1haWxJZH0vYXR0YWNobWVudHMvJHtpZH1gKTtcblx0fVxuXHRhc3luYyBsaXN0KG9wdGlvbnMpIHtcblx0XHRjb25zdCB7IGVtYWlsSWQgfSA9IG9wdGlvbnM7XG5cdFx0Y29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcblx0XHRjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvZW1haWxzL3JlY2VpdmluZy8ke2VtYWlsSWR9L2F0dGFjaG1lbnRzPyR7cXVlcnlTdHJpbmd9YCA6IGAvZW1haWxzL3JlY2VpdmluZy8ke2VtYWlsSWR9L2F0dGFjaG1lbnRzYDtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9lbWFpbHMvcmVjZWl2aW5nL3JlY2VpdmluZy50c1xudmFyIFJlY2VpdmluZyA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocmVzZW5kKSB7XG5cdFx0dGhpcy5yZXNlbmQgPSByZXNlbmQ7XG5cdFx0dGhpcy5hdHRhY2htZW50cyA9IG5ldyBBdHRhY2htZW50cyQxKHJlc2VuZCk7XG5cdH1cblx0YXN5bmMgZ2V0KGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldChgL2VtYWlscy9yZWNlaXZpbmcvJHtpZH1gKTtcblx0fVxuXHRhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuXHRcdGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG5cdFx0Y29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2VtYWlscy9yZWNlaXZpbmc/JHtxdWVyeVN0cmluZ31gIDogXCIvZW1haWxzL3JlY2VpdmluZ1wiO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2VtYWlscy9lbWFpbHMudHNcbnZhciBFbWFpbHMgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHRcdHRoaXMuYXR0YWNobWVudHMgPSBuZXcgQXR0YWNobWVudHMocmVzZW5kKTtcblx0XHR0aGlzLnJlY2VpdmluZyA9IG5ldyBSZWNlaXZpbmcocmVzZW5kKTtcblx0fVxuXHRhc3luYyBzZW5kKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuXHRcdHJldHVybiB0aGlzLmNyZWF0ZShwYXlsb2FkLCBvcHRpb25zKTtcblx0fVxuXHRhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0aWYgKHBheWxvYWQucmVhY3QpIHBheWxvYWQuaHRtbCA9IGF3YWl0IHJlbmRlcihwYXlsb2FkLnJlYWN0KTtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcIi9lbWFpbHNcIiwgcGFyc2VFbWFpbFRvQXBpT3B0aW9ucyhwYXlsb2FkKSwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgZ2V0KGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldChgL2VtYWlscy8ke2lkfWApO1xuXHR9XG5cdGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcblx0XHRjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvZW1haWxzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2VtYWlsc1wiO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcblx0fVxuXHRhc3luYyB1cGRhdGUocGF5bG9hZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChgL2VtYWlscy8ke3BheWxvYWQuaWR9YCwgeyBzY2hlZHVsZWRfYXQ6IHBheWxvYWQuc2NoZWR1bGVkQXQgfSk7XG5cdH1cblx0YXN5bmMgY2FuY2VsKGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoYC9lbWFpbHMvJHtpZH0vY2FuY2VsYCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zZWdtZW50cy9zZWdtZW50cy50c1xudmFyIFNlZ21lbnRzID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0fVxuXHRhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXCIvc2VnbWVudHNcIiwgcGF5bG9hZCwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcblx0XHRjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuXHRcdGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9zZWdtZW50cz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9zZWdtZW50c1wiO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcblx0fVxuXHRhc3luYyBnZXQoaWQpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KGAvc2VnbWVudHMvJHtpZH1gKTtcblx0fVxuXHRhc3luYyByZW1vdmUoaWQpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKGAvc2VnbWVudHMvJHtpZH1gKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2NvbW1vbi91dGlscy9nZXQtcGFnaW5hdGlvbi1xdWVyeS1wcm9wZXJ0aWVzLnRzXG5mdW5jdGlvbiBnZXRQYWdpbmF0aW9uUXVlcnlQcm9wZXJ0aWVzKG9wdGlvbnMgPSB7fSkge1xuXHRjb25zdCBxdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblx0aWYgKG9wdGlvbnMuYmVmb3JlKSBxdWVyeS5zZXQoXCJiZWZvcmVcIiwgb3B0aW9ucy5iZWZvcmUpO1xuXHRpZiAob3B0aW9ucy5hZnRlcikgcXVlcnkuc2V0KFwiYWZ0ZXJcIiwgb3B0aW9ucy5hZnRlcik7XG5cdGlmIChvcHRpb25zLmxpbWl0KSBxdWVyeS5zZXQoXCJsaW1pdFwiLCBvcHRpb25zLmxpbWl0LnRvU3RyaW5nKCkpO1xuXHRyZXR1cm4gcXVlcnkuc2l6ZSA+IDAgPyBgPyR7cXVlcnkudG9TdHJpbmcoKX1gIDogXCJcIjtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2NvbW1vbi91dGlscy9wYXJzZS10ZW1wbGF0ZS10by1hcGktb3B0aW9ucy50c1xuZnVuY3Rpb24gcGFyc2VWYXJpYWJsZXModmFyaWFibGVzKSB7XG5cdHJldHVybiB2YXJpYWJsZXM/Lm1hcCgodmFyaWFibGUpID0+ICh7XG5cdFx0a2V5OiB2YXJpYWJsZS5rZXksXG5cdFx0dHlwZTogdmFyaWFibGUudHlwZSxcblx0XHRmYWxsYmFja192YWx1ZTogdmFyaWFibGUuZmFsbGJhY2tWYWx1ZVxuXHR9KSk7XG59XG5mdW5jdGlvbiBwYXJzZVRlbXBsYXRlVG9BcGlPcHRpb25zKHRlbXBsYXRlKSB7XG5cdHJldHVybiB7XG5cdFx0bmFtZTogXCJuYW1lXCIgaW4gdGVtcGxhdGUgPyB0ZW1wbGF0ZS5uYW1lIDogdm9pZCAwLFxuXHRcdHN1YmplY3Q6IHRlbXBsYXRlLnN1YmplY3QsXG5cdFx0aHRtbDogdGVtcGxhdGUuaHRtbCxcblx0XHR0ZXh0OiB0ZW1wbGF0ZS50ZXh0LFxuXHRcdGFsaWFzOiB0ZW1wbGF0ZS5hbGlhcyxcblx0XHRmcm9tOiB0ZW1wbGF0ZS5mcm9tLFxuXHRcdHJlcGx5X3RvOiB0ZW1wbGF0ZS5yZXBseVRvLFxuXHRcdHZhcmlhYmxlczogcGFyc2VWYXJpYWJsZXModGVtcGxhdGUudmFyaWFibGVzKVxuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvdGVtcGxhdGVzL2NoYWluYWJsZS10ZW1wbGF0ZS1yZXN1bHQudHNcbnZhciBDaGFpbmFibGVUZW1wbGF0ZVJlc3VsdCA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocHJvbWlzZSwgcHVibGlzaEZuKSB7XG5cdFx0dGhpcy5wcm9taXNlID0gcHJvbWlzZTtcblx0XHR0aGlzLnB1Ymxpc2hGbiA9IHB1Ymxpc2hGbjtcblx0fVxuXHR0aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKSB7XG5cdFx0cmV0dXJuIHRoaXMucHJvbWlzZS50aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKTtcblx0fVxuXHRhc3luYyBwdWJsaXNoKCkge1xuXHRcdGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMucHJvbWlzZTtcblx0XHRpZiAoZXJyb3IpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yXG5cdFx0fTtcblx0XHRyZXR1cm4gdGhpcy5wdWJsaXNoRm4oZGF0YS5pZCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy90ZW1wbGF0ZXMvdGVtcGxhdGVzLnRzXG52YXIgVGVtcGxhdGVzID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0fVxuXHRjcmVhdGUocGF5bG9hZCkge1xuXHRcdHJldHVybiBuZXcgQ2hhaW5hYmxlVGVtcGxhdGVSZXN1bHQodGhpcy5wZXJmb3JtQ3JlYXRlKHBheWxvYWQpLCB0aGlzLnB1Ymxpc2guYmluZCh0aGlzKSk7XG5cdH1cblx0YXN5bmMgcGVyZm9ybUNyZWF0ZShwYXlsb2FkKSB7XG5cdFx0aWYgKHBheWxvYWQucmVhY3QpIHtcblx0XHRcdGlmICghdGhpcy5yZW5kZXJBc3luYykgdHJ5IHtcblx0XHRcdFx0Y29uc3QgeyByZW5kZXJBc3luYyB9ID0gYXdhaXQgaW1wb3J0KFwiQHJlYWN0LWVtYWlsL3JlbmRlclwiKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJBc3luYyA9IHJlbmRlckFzeW5jO1xuXHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byByZW5kZXIgUmVhY3QgY29tcG9uZW50LiBNYWtlIHN1cmUgdG8gaW5zdGFsbCBgQHJlYWN0LWVtYWlsL3JlbmRlcmBcIik7XG5cdFx0XHR9XG5cdFx0XHRwYXlsb2FkLmh0bWwgPSBhd2FpdCB0aGlzLnJlbmRlckFzeW5jKHBheWxvYWQucmVhY3QpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5yZXNlbmQucG9zdChcIi90ZW1wbGF0ZXNcIiwgcGFyc2VUZW1wbGF0ZVRvQXBpT3B0aW9ucyhwYXlsb2FkKSk7XG5cdH1cblx0YXN5bmMgcmVtb3ZlKGlkZW50aWZpZXIpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKGAvdGVtcGxhdGVzLyR7aWRlbnRpZmllcn1gKTtcblx0fVxuXHRhc3luYyBnZXQoaWRlbnRpZmllcikge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoYC90ZW1wbGF0ZXMvJHtpZGVudGlmaWVyfWApO1xuXHR9XG5cdGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG5cdFx0cmV0dXJuIHRoaXMucmVzZW5kLmdldChgL3RlbXBsYXRlcyR7Z2V0UGFnaW5hdGlvblF1ZXJ5UHJvcGVydGllcyhvcHRpb25zKX1gKTtcblx0fVxuXHRkdXBsaWNhdGUoaWRlbnRpZmllcikge1xuXHRcdHJldHVybiBuZXcgQ2hhaW5hYmxlVGVtcGxhdGVSZXN1bHQodGhpcy5yZXNlbmQucG9zdChgL3RlbXBsYXRlcy8ke2lkZW50aWZpZXJ9L2R1cGxpY2F0ZWApLCB0aGlzLnB1Ymxpc2guYmluZCh0aGlzKSk7XG5cdH1cblx0YXN5bmMgcHVibGlzaChpZGVudGlmaWVyKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoYC90ZW1wbGF0ZXMvJHtpZGVudGlmaWVyfS9wdWJsaXNoYCk7XG5cdH1cblx0YXN5bmMgdXBkYXRlKGlkZW50aWZpZXIsIHBheWxvYWQpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goYC90ZW1wbGF0ZXMvJHtpZGVudGlmaWVyfWAsIHBhcnNlVGVtcGxhdGVUb0FwaU9wdGlvbnMocGF5bG9hZCkpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvdG9waWNzL3RvcGljcy50c1xudmFyIFRvcGljcyA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocmVzZW5kKSB7XG5cdFx0dGhpcy5yZXNlbmQgPSByZXNlbmQ7XG5cdH1cblx0YXN5bmMgY3JlYXRlKHBheWxvYWQpIHtcblx0XHRjb25zdCB7IGRlZmF1bHRTdWJzY3JpcHRpb24sIC4uLmJvZHkgfSA9IHBheWxvYWQ7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXCIvdG9waWNzXCIsIHtcblx0XHRcdC4uLmJvZHksXG5cdFx0XHRkZWZhdWx0X3N1YnNjcmlwdGlvbjogZGVmYXVsdFN1YnNjcmlwdGlvblxuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIGxpc3QoKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldChcIi90b3BpY3NcIik7XG5cdH1cblx0YXN5bmMgZ2V0KGlkKSB7XG5cdFx0aWYgKCFpZCkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRoZWFkZXJzOiBudWxsLFxuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0bWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KGAvdG9waWNzLyR7aWR9YCk7XG5cdH1cblx0YXN5bmMgdXBkYXRlKHBheWxvYWQpIHtcblx0XHRpZiAoIXBheWxvYWQuaWQpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIGZpZWxkLlwiLFxuXHRcdFx0XHRzdGF0dXNDb2RlOiBudWxsLFxuXHRcdFx0XHRuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKGAvdG9waWNzLyR7cGF5bG9hZC5pZH1gLCBwYXlsb2FkKTtcblx0fVxuXHRhc3luYyByZW1vdmUoaWQpIHtcblx0XHRpZiAoIWlkKSByZXR1cm4ge1xuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGhlYWRlcnM6IG51bGwsXG5cdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBmaWVsZC5cIixcblx0XHRcdFx0c3RhdHVzQ29kZTogbnVsbCxcblx0XHRcdFx0bmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcblx0XHRcdH1cblx0XHR9O1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5kZWxldGUoYC90b3BpY3MvJHtpZH1gKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3dlYmhvb2tzL3dlYmhvb2tzLnRzXG52YXIgV2ViaG9va3MgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHR9XG5cdGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcIi93ZWJob29rc1wiLCBwYXlsb2FkLCBvcHRpb25zKTtcblx0fVxuXHRhc3luYyBnZXQoaWQpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KGAvd2ViaG9va3MvJHtpZH1gKTtcblx0fVxuXHRhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuXHRcdGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG5cdFx0Y29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL3dlYmhvb2tzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL3dlYmhvb2tzXCI7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuXHR9XG5cdGFzeW5jIHVwZGF0ZShpZCwgcGF5bG9hZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChgL3dlYmhvb2tzLyR7aWR9YCwgcGF5bG9hZCk7XG5cdH1cblx0YXN5bmMgcmVtb3ZlKGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShgL3dlYmhvb2tzLyR7aWR9YCk7XG5cdH1cblx0dmVyaWZ5KHBheWxvYWQpIHtcblx0XHRyZXR1cm4gbmV3IFdlYmhvb2socGF5bG9hZC53ZWJob29rU2VjcmV0KS52ZXJpZnkocGF5bG9hZC5wYXlsb2FkLCB7XG5cdFx0XHRcInN2aXgtaWRcIjogcGF5bG9hZC5oZWFkZXJzLmlkLFxuXHRcdFx0XCJzdml4LXRpbWVzdGFtcFwiOiBwYXlsb2FkLmhlYWRlcnMudGltZXN0YW1wLFxuXHRcdFx0XCJzdml4LXNpZ25hdHVyZVwiOiBwYXlsb2FkLmhlYWRlcnMuc2lnbmF0dXJlXG5cdFx0fSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9yZXNlbmQudHNcbmNvbnN0IGRlZmF1bHRCYXNlVXJsID0gXCJodHRwczovL2FwaS5yZXNlbmQuY29tXCI7XG5jb25zdCBkZWZhdWx0VXNlckFnZW50ID0gYHJlc2VuZC1ub2RlOiR7dmVyc2lvbn1gO1xuY29uc3QgYmFzZVVybCA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MuZW52ID8gcHJvY2Vzcy5lbnYuUkVTRU5EX0JBU0VfVVJMIHx8IGRlZmF1bHRCYXNlVXJsIDogZGVmYXVsdEJhc2VVcmw7XG5jb25zdCB1c2VyQWdlbnQgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudiA/IHByb2Nlc3MuZW52LlJFU0VORF9VU0VSX0FHRU5UIHx8IGRlZmF1bHRVc2VyQWdlbnQgOiBkZWZhdWx0VXNlckFnZW50O1xudmFyIFJlc2VuZCA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3Ioa2V5KSB7XG5cdFx0dGhpcy5rZXkgPSBrZXk7XG5cdFx0dGhpcy5hcGlLZXlzID0gbmV3IEFwaUtleXModGhpcyk7XG5cdFx0dGhpcy5zZWdtZW50cyA9IG5ldyBTZWdtZW50cyh0aGlzKTtcblx0XHR0aGlzLmF1ZGllbmNlcyA9IHRoaXMuc2VnbWVudHM7XG5cdFx0dGhpcy5iYXRjaCA9IG5ldyBCYXRjaCh0aGlzKTtcblx0XHR0aGlzLmJyb2FkY2FzdHMgPSBuZXcgQnJvYWRjYXN0cyh0aGlzKTtcblx0XHR0aGlzLmNvbnRhY3RzID0gbmV3IENvbnRhY3RzKHRoaXMpO1xuXHRcdHRoaXMuY29udGFjdFByb3BlcnRpZXMgPSBuZXcgQ29udGFjdFByb3BlcnRpZXModGhpcyk7XG5cdFx0dGhpcy5kb21haW5zID0gbmV3IERvbWFpbnModGhpcyk7XG5cdFx0dGhpcy5lbWFpbHMgPSBuZXcgRW1haWxzKHRoaXMpO1xuXHRcdHRoaXMud2ViaG9va3MgPSBuZXcgV2ViaG9va3ModGhpcyk7XG5cdFx0dGhpcy50ZW1wbGF0ZXMgPSBuZXcgVGVtcGxhdGVzKHRoaXMpO1xuXHRcdHRoaXMudG9waWNzID0gbmV3IFRvcGljcyh0aGlzKTtcblx0XHRpZiAoIWtleSkge1xuXHRcdFx0aWYgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MuZW52KSB0aGlzLmtleSA9IHByb2Nlc3MuZW52LlJFU0VORF9BUElfS0VZO1xuXHRcdFx0aWYgKCF0aGlzLmtleSkgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBBUEkga2V5LiBQYXNzIGl0IHRvIHRoZSBjb25zdHJ1Y3RvciBgbmV3IFJlc2VuZChcXFwicmVfMTIzXFxcIilgXCIpO1xuXHRcdH1cblx0XHR0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyh7XG5cdFx0XHRBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5rZXl9YCxcblx0XHRcdFwiVXNlci1BZ2VudFwiOiB1c2VyQWdlbnQsXG5cdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIGZldGNoUmVxdWVzdChwYXRoLCBvcHRpb25zID0ge30pIHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfSR7cGF0aH1gLCBvcHRpb25zKTtcblx0XHRcdGlmICghcmVzcG9uc2Uub2spIHRyeSB7XG5cdFx0XHRcdGNvbnN0IHJhd0Vycm9yID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdFx0ZXJyb3I6IEpTT04ucGFyc2UocmF3RXJyb3IpLFxuXHRcdFx0XHRcdGhlYWRlcnM6IE9iamVjdC5mcm9tRW50cmllcyhyZXNwb25zZS5oZWFkZXJzLmVudHJpZXMoKSlcblx0XHRcdFx0fTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRpZiAoZXJyIGluc3RhbmNlb2YgU3ludGF4RXJyb3IpIHJldHVybiB7XG5cdFx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRcdFx0bmFtZTogXCJhcHBsaWNhdGlvbl9lcnJvclwiLFxuXHRcdFx0XHRcdFx0c3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuXHRcdFx0XHRcdFx0bWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuIFdlIGFyZSB1bmFibGUgdG8gcHJvY2VzcyB5b3VyIHJlcXVlc3QgcmlnaHQgbm93LCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMocmVzcG9uc2UuaGVhZGVycy5lbnRyaWVzKCkpXG5cdFx0XHRcdH07XG5cdFx0XHRcdGNvbnN0IGVycm9yID0ge1xuXHRcdFx0XHRcdG1lc3NhZ2U6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG5cdFx0XHRcdFx0c3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuXHRcdFx0XHRcdG5hbWU6IFwiYXBwbGljYXRpb25fZXJyb3JcIlxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiB7XG5cdFx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRcdFx0Li4uZXJyb3IsXG5cdFx0XHRcdFx0XHRtZXNzYWdlOiBlcnIubWVzc2FnZVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aGVhZGVyczogT2JqZWN0LmZyb21FbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdFx0ZXJyb3IsXG5cdFx0XHRcdFx0aGVhZGVyczogT2JqZWN0LmZyb21FbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0ZGF0YTogYXdhaXQgcmVzcG9uc2UuanNvbigpLFxuXHRcdFx0XHRlcnJvcjogbnVsbCxcblx0XHRcdFx0aGVhZGVyczogT2JqZWN0LmZyb21FbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKVxuXHRcdFx0fTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdFx0bmFtZTogXCJhcHBsaWNhdGlvbl9lcnJvclwiLFxuXHRcdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdFx0bWVzc2FnZTogXCJVbmFibGUgdG8gZmV0Y2ggZGF0YS4gVGhlIHJlcXVlc3QgY291bGQgbm90IGJlIHJlc29sdmVkLlwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGhlYWRlcnM6IG51bGxcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cdGFzeW5jIHBvc3QocGF0aCwgZW50aXR5LCBvcHRpb25zID0ge30pIHtcblx0XHRjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKTtcblx0XHRpZiAob3B0aW9ucy5oZWFkZXJzKSBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpLmVudHJpZXMoKSkgaGVhZGVycy5zZXQoa2V5LCB2YWx1ZSk7XG5cdFx0aWYgKG9wdGlvbnMuaWRlbXBvdGVuY3lLZXkpIGhlYWRlcnMuc2V0KFwiSWRlbXBvdGVuY3ktS2V5XCIsIG9wdGlvbnMuaWRlbXBvdGVuY3lLZXkpO1xuXHRcdGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KGVudGl0eSksXG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0aGVhZGVyc1xuXHRcdH07XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKTtcblx0fVxuXHRhc3luYyBnZXQocGF0aCwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyk7XG5cdFx0aWYgKG9wdGlvbnMuaGVhZGVycykgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKS5lbnRyaWVzKCkpIGhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuXHRcdGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuXHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdGhlYWRlcnNcblx0XHR9O1xuXHRcdHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgcHV0KHBhdGgsIGVudGl0eSwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyk7XG5cdFx0aWYgKG9wdGlvbnMuaGVhZGVycykgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKS5lbnRyaWVzKCkpIGhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuXHRcdGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuXHRcdFx0bWV0aG9kOiBcIlBVVFwiLFxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoZW50aXR5KSxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRoZWFkZXJzXG5cdFx0fTtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuXHR9XG5cdGFzeW5jIHBhdGNoKHBhdGgsIGVudGl0eSwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyk7XG5cdFx0aWYgKG9wdGlvbnMuaGVhZGVycykgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKS5lbnRyaWVzKCkpIGhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuXHRcdGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuXHRcdFx0bWV0aG9kOiBcIlBBVENIXCIsXG5cdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeShlbnRpdHkpLFxuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdGhlYWRlcnNcblx0XHR9O1xuXHRcdHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgZGVsZXRlKHBhdGgsIHF1ZXJ5KSB7XG5cdFx0Y29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG5cdFx0XHRtZXRob2Q6IFwiREVMRVRFXCIsXG5cdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeShxdWVyeSksXG5cdFx0XHRoZWFkZXJzOiB0aGlzLmhlYWRlcnNcblx0XHR9O1xuXHRcdHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucyk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgUmVzZW5kIH07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/../../node_modules/resend/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/resend/dist/index.mjs":
/*!************************************************!*\
  !*** ../../node_modules/resend/dist/index.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Resend: () => (/* binding */ Resend)\n/* harmony export */ });\n/* harmony import */ var svix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! svix */ \"(rsc)/../../node_modules/svix/dist/index.js\");\n\n\n//#region package.json\nvar version = \"6.5.2\";\n\n//#endregion\n//#region src/common/utils/build-pagination-query.ts\n/**\n* Builds a query string from pagination options\n* @param options - Pagination options containing limit and either after or before (but not both)\n* @returns Query string (without leading '?') or empty string if no options\n*/\nfunction buildPaginationQuery(options) {\n\tconst searchParams = new URLSearchParams();\n\tif (options.limit !== void 0) searchParams.set(\"limit\", options.limit.toString());\n\tif (\"after\" in options && options.after !== void 0) searchParams.set(\"after\", options.after);\n\tif (\"before\" in options && options.before !== void 0) searchParams.set(\"before\", options.before);\n\treturn searchParams.toString();\n}\n\n//#endregion\n//#region src/api-keys/api-keys.ts\nvar ApiKeys = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload, options = {}) {\n\t\treturn await this.resend.post(\"/api-keys\", payload, options);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/api-keys?${queryString}` : \"/api-keys\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync remove(id) {\n\t\treturn await this.resend.delete(`/api-keys/${id}`);\n\t}\n};\n\n//#endregion\n//#region src/common/utils/parse-email-to-api-options.ts\nfunction parseAttachments(attachments) {\n\treturn attachments?.map((attachment) => ({\n\t\tcontent: attachment.content,\n\t\tfilename: attachment.filename,\n\t\tpath: attachment.path,\n\t\tcontent_type: attachment.contentType,\n\t\tcontent_id: attachment.contentId\n\t}));\n}\nfunction parseEmailToApiOptions(email) {\n\treturn {\n\t\tattachments: parseAttachments(email.attachments),\n\t\tbcc: email.bcc,\n\t\tcc: email.cc,\n\t\tfrom: email.from,\n\t\theaders: email.headers,\n\t\thtml: email.html,\n\t\treply_to: email.replyTo,\n\t\tscheduled_at: email.scheduledAt,\n\t\tsubject: email.subject,\n\t\ttags: email.tags,\n\t\ttext: email.text,\n\t\tto: email.to,\n\t\ttemplate: email.template ? {\n\t\t\tid: email.template.id,\n\t\t\tvariables: email.template.variables\n\t\t} : void 0,\n\t\ttopic_id: email.topicId\n\t};\n}\n\n//#endregion\n//#region src/render.ts\nasync function render(node) {\n\tlet render$1;\n\ttry {\n\t\t({render: render$1} = await __webpack_require__.e(/*! import() */ \"_7e82\").then(__webpack_require__.t.bind(__webpack_require__, /*! @react-email/render */ \"?7e82\", 19)));\n\t} catch {\n\t\tthrow new Error(\"Failed to render React component. Make sure to install `@react-email/render` or `@react-email/components`.\");\n\t}\n\treturn render$1(node);\n}\n\n//#endregion\n//#region src/batch/batch.ts\nvar Batch = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync send(payload, options) {\n\t\treturn this.create(payload, options);\n\t}\n\tasync create(payload, options) {\n\t\tconst emails = [];\n\t\tfor (const email of payload) {\n\t\t\tif (email.react) {\n\t\t\t\temail.html = await render(email.react);\n\t\t\t\temail.react = void 0;\n\t\t\t}\n\t\t\temails.push(parseEmailToApiOptions(email));\n\t\t}\n\t\treturn await this.resend.post(\"/emails/batch\", emails, {\n\t\t\t...options,\n\t\t\theaders: {\n\t\t\t\t\"x-batch-validation\": options?.batchValidation ?? \"strict\",\n\t\t\t\t...options?.headers\n\t\t\t}\n\t\t});\n\t}\n};\n\n//#endregion\n//#region src/broadcasts/broadcasts.ts\nvar Broadcasts = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload, options = {}) {\n\t\tif (payload.react) payload.html = await render(payload.react);\n\t\treturn await this.resend.post(\"/broadcasts\", {\n\t\t\tname: payload.name,\n\t\t\tsegment_id: payload.segmentId,\n\t\t\taudience_id: payload.audienceId,\n\t\t\tpreview_text: payload.previewText,\n\t\t\tfrom: payload.from,\n\t\t\thtml: payload.html,\n\t\t\treply_to: payload.replyTo,\n\t\t\tsubject: payload.subject,\n\t\t\ttext: payload.text,\n\t\t\ttopic_id: payload.topicId\n\t\t}, options);\n\t}\n\tasync send(id, payload) {\n\t\treturn await this.resend.post(`/broadcasts/${id}/send`, { scheduled_at: payload?.scheduledAt });\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/broadcasts?${queryString}` : \"/broadcasts\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/broadcasts/${id}`);\n\t}\n\tasync remove(id) {\n\t\treturn await this.resend.delete(`/broadcasts/${id}`);\n\t}\n\tasync update(id, payload) {\n\t\tif (payload.react) payload.html = await render(payload.react);\n\t\treturn await this.resend.patch(`/broadcasts/${id}`, {\n\t\t\tname: payload.name,\n\t\t\tsegment_id: payload.segmentId,\n\t\t\taudience_id: payload.audienceId,\n\t\t\tfrom: payload.from,\n\t\t\thtml: payload.html,\n\t\t\ttext: payload.text,\n\t\t\tsubject: payload.subject,\n\t\t\treply_to: payload.replyTo,\n\t\t\tpreview_text: payload.previewText,\n\t\t\ttopic_id: payload.topicId\n\t\t});\n\t}\n};\n\n//#endregion\n//#region src/common/utils/parse-contact-properties-to-api-options.ts\nfunction parseContactPropertyFromApi(contactProperty) {\n\treturn {\n\t\tid: contactProperty.id,\n\t\tkey: contactProperty.key,\n\t\tcreatedAt: contactProperty.created_at,\n\t\ttype: contactProperty.type,\n\t\tfallbackValue: contactProperty.fallback_value\n\t};\n}\nfunction parseContactPropertyToApiOptions(contactProperty) {\n\tif (\"key\" in contactProperty) return {\n\t\tkey: contactProperty.key,\n\t\ttype: contactProperty.type,\n\t\tfallback_value: contactProperty.fallbackValue\n\t};\n\treturn { fallback_value: contactProperty.fallbackValue };\n}\n\n//#endregion\n//#region src/contact-properties/contact-properties.ts\nvar ContactProperties = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(options) {\n\t\tconst apiOptions = parseContactPropertyToApiOptions(options);\n\t\treturn await this.resend.post(\"/contact-properties\", apiOptions);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/contact-properties?${queryString}` : \"/contact-properties\";\n\t\tconst response = await this.resend.get(url);\n\t\tif (response.data) return {\n\t\t\tdata: {\n\t\t\t\t...response.data,\n\t\t\t\tdata: response.data.data.map((apiContactProperty) => parseContactPropertyFromApi(apiContactProperty))\n\t\t\t},\n\t\t\theaders: response.headers,\n\t\t\terror: null\n\t\t};\n\t\treturn response;\n\t}\n\tasync get(id) {\n\t\tif (!id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst response = await this.resend.get(`/contact-properties/${id}`);\n\t\tif (response.data) return {\n\t\t\tdata: {\n\t\t\t\tobject: \"contact_property\",\n\t\t\t\t...parseContactPropertyFromApi(response.data)\n\t\t\t},\n\t\t\theaders: response.headers,\n\t\t\terror: null\n\t\t};\n\t\treturn response;\n\t}\n\tasync update(payload) {\n\t\tif (!payload.id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst apiOptions = parseContactPropertyToApiOptions(payload);\n\t\treturn await this.resend.patch(`/contact-properties/${payload.id}`, apiOptions);\n\t}\n\tasync remove(id) {\n\t\tif (!id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\treturn await this.resend.delete(`/contact-properties/${id}`);\n\t}\n};\n\n//#endregion\n//#region src/contacts/segments/contact-segments.ts\nvar ContactSegments = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync list(options) {\n\t\tif (!options.contactId && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst identifier = options.email ? options.email : options.contactId;\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/contacts/${identifier}/segments?${queryString}` : `/contacts/${identifier}/segments`;\n\t\treturn await this.resend.get(url);\n\t}\n\tasync add(options) {\n\t\tif (!options.contactId && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst identifier = options.email ? options.email : options.contactId;\n\t\treturn this.resend.post(`/contacts/${identifier}/segments/${options.segmentId}`);\n\t}\n\tasync remove(options) {\n\t\tif (!options.contactId && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst identifier = options.email ? options.email : options.contactId;\n\t\treturn this.resend.delete(`/contacts/${identifier}/segments/${options.segmentId}`);\n\t}\n};\n\n//#endregion\n//#region src/contacts/topics/contact-topics.ts\nvar ContactTopics = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync update(payload) {\n\t\tif (!payload.id && !payload.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst identifier = payload.email ? payload.email : payload.id;\n\t\treturn this.resend.patch(`/contacts/${identifier}/topics`, payload.topics);\n\t}\n\tasync list(options) {\n\t\tif (!options.id && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tconst identifier = options.email ? options.email : options.id;\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/contacts/${identifier}/topics?${queryString}` : `/contacts/${identifier}/topics`;\n\t\treturn this.resend.get(url);\n\t}\n};\n\n//#endregion\n//#region src/contacts/contacts.ts\nvar Contacts = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t\tthis.topics = new ContactTopics(this.resend);\n\t\tthis.segments = new ContactSegments(this.resend);\n\t}\n\tasync create(payload, options = {}) {\n\t\tif (!payload.audienceId) return await this.resend.post(\"/contacts\", {\n\t\t\tunsubscribed: payload.unsubscribed,\n\t\t\temail: payload.email,\n\t\t\tfirst_name: payload.firstName,\n\t\t\tlast_name: payload.lastName,\n\t\t\tproperties: payload.properties\n\t\t}, options);\n\t\treturn await this.resend.post(`/audiences/${payload.audienceId}/contacts`, {\n\t\t\tunsubscribed: payload.unsubscribed,\n\t\t\temail: payload.email,\n\t\t\tfirst_name: payload.firstName,\n\t\t\tlast_name: payload.lastName,\n\t\t\tproperties: payload.properties\n\t\t}, options);\n\t}\n\tasync list(options = {}) {\n\t\tconst segmentId = options.segmentId ?? options.audienceId;\n\t\tif (!segmentId) {\n\t\t\tconst queryString$1 = buildPaginationQuery(options);\n\t\t\tconst url$1 = queryString$1 ? `/contacts?${queryString$1}` : \"/contacts\";\n\t\t\treturn await this.resend.get(url$1);\n\t\t}\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/segments/${segmentId}/contacts?${queryString}` : `/segments/${segmentId}/contacts`;\n\t\treturn await this.resend.get(url);\n\t}\n\tasync get(options) {\n\t\tif (typeof options === \"string\") return this.resend.get(`/contacts/${options}`);\n\t\tif (!options.id && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tif (!options.audienceId) return this.resend.get(`/contacts/${options?.email ? options?.email : options?.id}`);\n\t\treturn this.resend.get(`/audiences/${options.audienceId}/contacts/${options?.email ? options?.email : options?.id}`);\n\t}\n\tasync update(options) {\n\t\tif (!options.id && !options.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tif (!options.audienceId) return await this.resend.patch(`/contacts/${options?.email ? options?.email : options?.id}`, {\n\t\t\tunsubscribed: options.unsubscribed,\n\t\t\tfirst_name: options.firstName,\n\t\t\tlast_name: options.lastName,\n\t\t\tproperties: options.properties\n\t\t});\n\t\treturn await this.resend.patch(`/audiences/${options.audienceId}/contacts/${options?.email ? options?.email : options?.id}`, {\n\t\t\tunsubscribed: options.unsubscribed,\n\t\t\tfirst_name: options.firstName,\n\t\t\tlast_name: options.lastName,\n\t\t\tproperties: options.properties\n\t\t});\n\t}\n\tasync remove(payload) {\n\t\tif (typeof payload === \"string\") return this.resend.delete(`/contacts/${payload}`);\n\t\tif (!payload.id && !payload.email) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` or `email` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\tif (!payload.audienceId) return this.resend.delete(`/contacts/${payload?.email ? payload?.email : payload?.id}`);\n\t\treturn this.resend.delete(`/audiences/${payload.audienceId}/contacts/${payload?.email ? payload?.email : payload?.id}`);\n\t}\n};\n\n//#endregion\n//#region src/common/utils/parse-domain-to-api-options.ts\nfunction parseDomainToApiOptions(domain) {\n\treturn {\n\t\tname: domain.name,\n\t\tregion: domain.region,\n\t\tcustom_return_path: domain.customReturnPath,\n\t\tcapabilities: domain.capabilities\n\t};\n}\n\n//#endregion\n//#region src/domains/domains.ts\nvar Domains = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload, options = {}) {\n\t\treturn await this.resend.post(\"/domains\", parseDomainToApiOptions(payload), options);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/domains?${queryString}` : \"/domains\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/domains/${id}`);\n\t}\n\tasync update(payload) {\n\t\treturn await this.resend.patch(`/domains/${payload.id}`, {\n\t\t\tclick_tracking: payload.clickTracking,\n\t\t\topen_tracking: payload.openTracking,\n\t\t\ttls: payload.tls,\n\t\t\tcapabilities: payload.capabilities\n\t\t});\n\t}\n\tasync remove(id) {\n\t\treturn await this.resend.delete(`/domains/${id}`);\n\t}\n\tasync verify(id) {\n\t\treturn await this.resend.post(`/domains/${id}/verify`);\n\t}\n};\n\n//#endregion\n//#region src/emails/attachments/attachments.ts\nvar Attachments = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync get(options) {\n\t\tconst { emailId, id } = options;\n\t\treturn await this.resend.get(`/emails/${emailId}/attachments/${id}`);\n\t}\n\tasync list(options) {\n\t\tconst { emailId } = options;\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/emails/${emailId}/attachments?${queryString}` : `/emails/${emailId}/attachments`;\n\t\treturn await this.resend.get(url);\n\t}\n};\n\n//#endregion\n//#region src/emails/receiving/attachments/attachments.ts\nvar Attachments$1 = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync get(options) {\n\t\tconst { emailId, id } = options;\n\t\treturn await this.resend.get(`/emails/receiving/${emailId}/attachments/${id}`);\n\t}\n\tasync list(options) {\n\t\tconst { emailId } = options;\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/emails/receiving/${emailId}/attachments?${queryString}` : `/emails/receiving/${emailId}/attachments`;\n\t\treturn await this.resend.get(url);\n\t}\n};\n\n//#endregion\n//#region src/emails/receiving/receiving.ts\nvar Receiving = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t\tthis.attachments = new Attachments$1(resend);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/emails/receiving/${id}`);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/emails/receiving?${queryString}` : \"/emails/receiving\";\n\t\treturn await this.resend.get(url);\n\t}\n};\n\n//#endregion\n//#region src/emails/emails.ts\nvar Emails = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t\tthis.attachments = new Attachments(resend);\n\t\tthis.receiving = new Receiving(resend);\n\t}\n\tasync send(payload, options = {}) {\n\t\treturn this.create(payload, options);\n\t}\n\tasync create(payload, options = {}) {\n\t\tif (payload.react) payload.html = await render(payload.react);\n\t\treturn await this.resend.post(\"/emails\", parseEmailToApiOptions(payload), options);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/emails/${id}`);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/emails?${queryString}` : \"/emails\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync update(payload) {\n\t\treturn await this.resend.patch(`/emails/${payload.id}`, { scheduled_at: payload.scheduledAt });\n\t}\n\tasync cancel(id) {\n\t\treturn await this.resend.post(`/emails/${id}/cancel`);\n\t}\n};\n\n//#endregion\n//#region src/segments/segments.ts\nvar Segments = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload, options = {}) {\n\t\treturn await this.resend.post(\"/segments\", payload, options);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/segments?${queryString}` : \"/segments\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/segments/${id}`);\n\t}\n\tasync remove(id) {\n\t\treturn await this.resend.delete(`/segments/${id}`);\n\t}\n};\n\n//#endregion\n//#region src/common/utils/get-pagination-query-properties.ts\nfunction getPaginationQueryProperties(options = {}) {\n\tconst query = new URLSearchParams();\n\tif (options.before) query.set(\"before\", options.before);\n\tif (options.after) query.set(\"after\", options.after);\n\tif (options.limit) query.set(\"limit\", options.limit.toString());\n\treturn query.size > 0 ? `?${query.toString()}` : \"\";\n}\n\n//#endregion\n//#region src/common/utils/parse-template-to-api-options.ts\nfunction parseVariables(variables) {\n\treturn variables?.map((variable) => ({\n\t\tkey: variable.key,\n\t\ttype: variable.type,\n\t\tfallback_value: variable.fallbackValue\n\t}));\n}\nfunction parseTemplateToApiOptions(template) {\n\treturn {\n\t\tname: \"name\" in template ? template.name : void 0,\n\t\tsubject: template.subject,\n\t\thtml: template.html,\n\t\ttext: template.text,\n\t\talias: template.alias,\n\t\tfrom: template.from,\n\t\treply_to: template.replyTo,\n\t\tvariables: parseVariables(template.variables)\n\t};\n}\n\n//#endregion\n//#region src/templates/chainable-template-result.ts\nvar ChainableTemplateResult = class {\n\tconstructor(promise, publishFn) {\n\t\tthis.promise = promise;\n\t\tthis.publishFn = publishFn;\n\t}\n\tthen(onfulfilled, onrejected) {\n\t\treturn this.promise.then(onfulfilled, onrejected);\n\t}\n\tasync publish() {\n\t\tconst { data, error } = await this.promise;\n\t\tif (error) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror\n\t\t};\n\t\treturn this.publishFn(data.id);\n\t}\n};\n\n//#endregion\n//#region src/templates/templates.ts\nvar Templates = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tcreate(payload) {\n\t\treturn new ChainableTemplateResult(this.performCreate(payload), this.publish.bind(this));\n\t}\n\tasync performCreate(payload) {\n\t\tif (payload.react) {\n\t\t\tif (!this.renderAsync) try {\n\t\t\t\tconst { renderAsync } = await __webpack_require__.e(/*! import() */ \"_7e82\").then(__webpack_require__.t.bind(__webpack_require__, /*! @react-email/render */ \"?7e82\", 19));\n\t\t\t\tthis.renderAsync = renderAsync;\n\t\t\t} catch {\n\t\t\t\tthrow new Error(\"Failed to render React component. Make sure to install `@react-email/render`\");\n\t\t\t}\n\t\t\tpayload.html = await this.renderAsync(payload.react);\n\t\t}\n\t\treturn this.resend.post(\"/templates\", parseTemplateToApiOptions(payload));\n\t}\n\tasync remove(identifier) {\n\t\treturn await this.resend.delete(`/templates/${identifier}`);\n\t}\n\tasync get(identifier) {\n\t\treturn await this.resend.get(`/templates/${identifier}`);\n\t}\n\tasync list(options = {}) {\n\t\treturn this.resend.get(`/templates${getPaginationQueryProperties(options)}`);\n\t}\n\tduplicate(identifier) {\n\t\treturn new ChainableTemplateResult(this.resend.post(`/templates/${identifier}/duplicate`), this.publish.bind(this));\n\t}\n\tasync publish(identifier) {\n\t\treturn await this.resend.post(`/templates/${identifier}/publish`);\n\t}\n\tasync update(identifier, payload) {\n\t\treturn await this.resend.patch(`/templates/${identifier}`, parseTemplateToApiOptions(payload));\n\t}\n};\n\n//#endregion\n//#region src/topics/topics.ts\nvar Topics = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload) {\n\t\tconst { defaultSubscription, ...body } = payload;\n\t\treturn await this.resend.post(\"/topics\", {\n\t\t\t...body,\n\t\t\tdefault_subscription: defaultSubscription\n\t\t});\n\t}\n\tasync list() {\n\t\treturn await this.resend.get(\"/topics\");\n\t}\n\tasync get(id) {\n\t\tif (!id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\treturn await this.resend.get(`/topics/${id}`);\n\t}\n\tasync update(payload) {\n\t\tif (!payload.id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\treturn await this.resend.patch(`/topics/${payload.id}`, payload);\n\t}\n\tasync remove(id) {\n\t\tif (!id) return {\n\t\t\tdata: null,\n\t\t\theaders: null,\n\t\t\terror: {\n\t\t\t\tmessage: \"Missing `id` field.\",\n\t\t\t\tstatusCode: null,\n\t\t\t\tname: \"missing_required_field\"\n\t\t\t}\n\t\t};\n\t\treturn await this.resend.delete(`/topics/${id}`);\n\t}\n};\n\n//#endregion\n//#region src/webhooks/webhooks.ts\nvar Webhooks = class {\n\tconstructor(resend) {\n\t\tthis.resend = resend;\n\t}\n\tasync create(payload, options = {}) {\n\t\treturn await this.resend.post(\"/webhooks\", payload, options);\n\t}\n\tasync get(id) {\n\t\treturn await this.resend.get(`/webhooks/${id}`);\n\t}\n\tasync list(options = {}) {\n\t\tconst queryString = buildPaginationQuery(options);\n\t\tconst url = queryString ? `/webhooks?${queryString}` : \"/webhooks\";\n\t\treturn await this.resend.get(url);\n\t}\n\tasync update(id, payload) {\n\t\treturn await this.resend.patch(`/webhooks/${id}`, payload);\n\t}\n\tasync remove(id) {\n\t\treturn await this.resend.delete(`/webhooks/${id}`);\n\t}\n\tverify(payload) {\n\t\treturn new svix__WEBPACK_IMPORTED_MODULE_0__.Webhook(payload.webhookSecret).verify(payload.payload, {\n\t\t\t\"svix-id\": payload.headers.id,\n\t\t\t\"svix-timestamp\": payload.headers.timestamp,\n\t\t\t\"svix-signature\": payload.headers.signature\n\t\t});\n\t}\n};\n\n//#endregion\n//#region src/resend.ts\nconst defaultBaseUrl = \"https://api.resend.com\";\nconst defaultUserAgent = `resend-node:${version}`;\nconst baseUrl = typeof process !== \"undefined\" && process.env ? process.env.RESEND_BASE_URL || defaultBaseUrl : defaultBaseUrl;\nconst userAgent = typeof process !== \"undefined\" && process.env ? process.env.RESEND_USER_AGENT || defaultUserAgent : defaultUserAgent;\nvar Resend = class {\n\tconstructor(key) {\n\t\tthis.key = key;\n\t\tthis.apiKeys = new ApiKeys(this);\n\t\tthis.segments = new Segments(this);\n\t\tthis.audiences = this.segments;\n\t\tthis.batch = new Batch(this);\n\t\tthis.broadcasts = new Broadcasts(this);\n\t\tthis.contacts = new Contacts(this);\n\t\tthis.contactProperties = new ContactProperties(this);\n\t\tthis.domains = new Domains(this);\n\t\tthis.emails = new Emails(this);\n\t\tthis.webhooks = new Webhooks(this);\n\t\tthis.templates = new Templates(this);\n\t\tthis.topics = new Topics(this);\n\t\tif (!key) {\n\t\t\tif (typeof process !== \"undefined\" && process.env) this.key = process.env.RESEND_API_KEY;\n\t\t\tif (!this.key) throw new Error(\"Missing API key. Pass it to the constructor `new Resend(\\\"re_123\\\")`\");\n\t\t}\n\t\tthis.headers = new Headers({\n\t\t\tAuthorization: `Bearer ${this.key}`,\n\t\t\t\"User-Agent\": userAgent,\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t});\n\t}\n\tasync fetchRequest(path, options = {}) {\n\t\ttry {\n\t\t\tconst response = await fetch(`${baseUrl}${path}`, options);\n\t\t\tif (!response.ok) try {\n\t\t\t\tconst rawError = await response.text();\n\t\t\t\treturn {\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: JSON.parse(rawError),\n\t\t\t\t\theaders: Object.fromEntries(response.headers.entries())\n\t\t\t\t};\n\t\t\t} catch (err) {\n\t\t\t\tif (err instanceof SyntaxError) return {\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: {\n\t\t\t\t\t\tname: \"application_error\",\n\t\t\t\t\t\tstatusCode: response.status,\n\t\t\t\t\t\tmessage: \"Internal server error. We are unable to process your request right now, please try again later.\"\n\t\t\t\t\t},\n\t\t\t\t\theaders: Object.fromEntries(response.headers.entries())\n\t\t\t\t};\n\t\t\t\tconst error = {\n\t\t\t\t\tmessage: response.statusText,\n\t\t\t\t\tstatusCode: response.status,\n\t\t\t\t\tname: \"application_error\"\n\t\t\t\t};\n\t\t\t\tif (err instanceof Error) return {\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: {\n\t\t\t\t\t\t...error,\n\t\t\t\t\t\tmessage: err.message\n\t\t\t\t\t},\n\t\t\t\t\theaders: Object.fromEntries(response.headers.entries())\n\t\t\t\t};\n\t\t\t\treturn {\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror,\n\t\t\t\t\theaders: Object.fromEntries(response.headers.entries())\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tdata: await response.json(),\n\t\t\t\terror: null,\n\t\t\t\theaders: Object.fromEntries(response.headers.entries())\n\t\t\t};\n\t\t} catch {\n\t\t\treturn {\n\t\t\t\tdata: null,\n\t\t\t\terror: {\n\t\t\t\t\tname: \"application_error\",\n\t\t\t\t\tstatusCode: null,\n\t\t\t\t\tmessage: \"Unable to fetch data. The request could not be resolved.\"\n\t\t\t\t},\n\t\t\t\theaders: null\n\t\t\t};\n\t\t}\n\t}\n\tasync post(path, entity, options = {}) {\n\t\tconst headers = new Headers(this.headers);\n\t\tif (options.headers) for (const [key, value] of new Headers(options.headers).entries()) headers.set(key, value);\n\t\tif (options.idempotencyKey) headers.set(\"Idempotency-Key\", options.idempotencyKey);\n\t\tconst requestOptions = {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(entity),\n\t\t\t...options,\n\t\t\theaders\n\t\t};\n\t\treturn this.fetchRequest(path, requestOptions);\n\t}\n\tasync get(path, options = {}) {\n\t\tconst headers = new Headers(this.headers);\n\t\tif (options.headers) for (const [key, value] of new Headers(options.headers).entries()) headers.set(key, value);\n\t\tconst requestOptions = {\n\t\t\tmethod: \"GET\",\n\t\t\t...options,\n\t\t\theaders\n\t\t};\n\t\treturn this.fetchRequest(path, requestOptions);\n\t}\n\tasync put(path, entity, options = {}) {\n\t\tconst headers = new Headers(this.headers);\n\t\tif (options.headers) for (const [key, value] of new Headers(options.headers).entries()) headers.set(key, value);\n\t\tconst requestOptions = {\n\t\t\tmethod: \"PUT\",\n\t\t\tbody: JSON.stringify(entity),\n\t\t\t...options,\n\t\t\theaders\n\t\t};\n\t\treturn this.fetchRequest(path, requestOptions);\n\t}\n\tasync patch(path, entity, options = {}) {\n\t\tconst headers = new Headers(this.headers);\n\t\tif (options.headers) for (const [key, value] of new Headers(options.headers).entries()) headers.set(key, value);\n\t\tconst requestOptions = {\n\t\t\tmethod: \"PATCH\",\n\t\t\tbody: JSON.stringify(entity),\n\t\t\t...options,\n\t\t\theaders\n\t\t};\n\t\treturn this.fetchRequest(path, requestOptions);\n\t}\n\tasync delete(path, query) {\n\t\tconst requestOptions = {\n\t\t\tmethod: \"DELETE\",\n\t\t\tbody: JSON.stringify(query),\n\t\t\theaders: this.headers\n\t\t};\n\t\treturn this.fetchRequest(path, requestOptions);\n\t}\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL3Jlc2VuZC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQjs7QUFFL0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0EseUNBQXlDLFlBQVk7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLEdBQUc7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrQkFBa0IsUUFBUSw0SUFBNkI7QUFDM0QsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLCtDQUErQyxHQUFHLFVBQVUsb0NBQW9DO0FBQ2hHO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0EsMkNBQTJDLFlBQVk7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Q0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uL25vZGVfbW9kdWxlcy9yZXNlbmQvZGlzdC9pbmRleC5tanM/NTdhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXZWJob29rIH0gZnJvbSBcInN2aXhcIjtcblxuLy8jcmVnaW9uIHBhY2thZ2UuanNvblxudmFyIHZlcnNpb24gPSBcIjYuNS4yXCI7XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9jb21tb24vdXRpbHMvYnVpbGQtcGFnaW5hdGlvbi1xdWVyeS50c1xuLyoqXG4qIEJ1aWxkcyBhIHF1ZXJ5IHN0cmluZyBmcm9tIHBhZ2luYXRpb24gb3B0aW9uc1xuKiBAcGFyYW0gb3B0aW9ucyAtIFBhZ2luYXRpb24gb3B0aW9ucyBjb250YWluaW5nIGxpbWl0IGFuZCBlaXRoZXIgYWZ0ZXIgb3IgYmVmb3JlIChidXQgbm90IGJvdGgpXG4qIEByZXR1cm5zIFF1ZXJ5IHN0cmluZyAod2l0aG91dCBsZWFkaW5nICc/Jykgb3IgZW1wdHkgc3RyaW5nIGlmIG5vIG9wdGlvbnNcbiovXG5mdW5jdGlvbiBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKSB7XG5cdGNvbnN0IHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblx0aWYgKG9wdGlvbnMubGltaXQgIT09IHZvaWQgMCkgc2VhcmNoUGFyYW1zLnNldChcImxpbWl0XCIsIG9wdGlvbnMubGltaXQudG9TdHJpbmcoKSk7XG5cdGlmIChcImFmdGVyXCIgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmFmdGVyICE9PSB2b2lkIDApIHNlYXJjaFBhcmFtcy5zZXQoXCJhZnRlclwiLCBvcHRpb25zLmFmdGVyKTtcblx0aWYgKFwiYmVmb3JlXCIgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmJlZm9yZSAhPT0gdm9pZCAwKSBzZWFyY2hQYXJhbXMuc2V0KFwiYmVmb3JlXCIsIG9wdGlvbnMuYmVmb3JlKTtcblx0cmV0dXJuIHNlYXJjaFBhcmFtcy50b1N0cmluZygpO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvYXBpLWtleXMvYXBpLWtleXMudHNcbnZhciBBcGlLZXlzID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0fVxuXHRhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXCIvYXBpLWtleXNcIiwgcGF5bG9hZCwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcblx0XHRjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuXHRcdGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9hcGkta2V5cz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9hcGkta2V5c1wiO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcblx0fVxuXHRhc3luYyByZW1vdmUoaWQpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKGAvYXBpLWtleXMvJHtpZH1gKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2NvbW1vbi91dGlscy9wYXJzZS1lbWFpbC10by1hcGktb3B0aW9ucy50c1xuZnVuY3Rpb24gcGFyc2VBdHRhY2htZW50cyhhdHRhY2htZW50cykge1xuXHRyZXR1cm4gYXR0YWNobWVudHM/Lm1hcCgoYXR0YWNobWVudCkgPT4gKHtcblx0XHRjb250ZW50OiBhdHRhY2htZW50LmNvbnRlbnQsXG5cdFx0ZmlsZW5hbWU6IGF0dGFjaG1lbnQuZmlsZW5hbWUsXG5cdFx0cGF0aDogYXR0YWNobWVudC5wYXRoLFxuXHRcdGNvbnRlbnRfdHlwZTogYXR0YWNobWVudC5jb250ZW50VHlwZSxcblx0XHRjb250ZW50X2lkOiBhdHRhY2htZW50LmNvbnRlbnRJZFxuXHR9KSk7XG59XG5mdW5jdGlvbiBwYXJzZUVtYWlsVG9BcGlPcHRpb25zKGVtYWlsKSB7XG5cdHJldHVybiB7XG5cdFx0YXR0YWNobWVudHM6IHBhcnNlQXR0YWNobWVudHMoZW1haWwuYXR0YWNobWVudHMpLFxuXHRcdGJjYzogZW1haWwuYmNjLFxuXHRcdGNjOiBlbWFpbC5jYyxcblx0XHRmcm9tOiBlbWFpbC5mcm9tLFxuXHRcdGhlYWRlcnM6IGVtYWlsLmhlYWRlcnMsXG5cdFx0aHRtbDogZW1haWwuaHRtbCxcblx0XHRyZXBseV90bzogZW1haWwucmVwbHlUbyxcblx0XHRzY2hlZHVsZWRfYXQ6IGVtYWlsLnNjaGVkdWxlZEF0LFxuXHRcdHN1YmplY3Q6IGVtYWlsLnN1YmplY3QsXG5cdFx0dGFnczogZW1haWwudGFncyxcblx0XHR0ZXh0OiBlbWFpbC50ZXh0LFxuXHRcdHRvOiBlbWFpbC50byxcblx0XHR0ZW1wbGF0ZTogZW1haWwudGVtcGxhdGUgPyB7XG5cdFx0XHRpZDogZW1haWwudGVtcGxhdGUuaWQsXG5cdFx0XHR2YXJpYWJsZXM6IGVtYWlsLnRlbXBsYXRlLnZhcmlhYmxlc1xuXHRcdH0gOiB2b2lkIDAsXG5cdFx0dG9waWNfaWQ6IGVtYWlsLnRvcGljSWRcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3JlbmRlci50c1xuYXN5bmMgZnVuY3Rpb24gcmVuZGVyKG5vZGUpIHtcblx0bGV0IHJlbmRlciQxO1xuXHR0cnkge1xuXHRcdCh7cmVuZGVyOiByZW5kZXIkMX0gPSBhd2FpdCBpbXBvcnQoXCJAcmVhY3QtZW1haWwvcmVuZGVyXCIpKTtcblx0fSBjYXRjaCB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHJlbmRlciBSZWFjdCBjb21wb25lbnQuIE1ha2Ugc3VyZSB0byBpbnN0YWxsIGBAcmVhY3QtZW1haWwvcmVuZGVyYCBvciBgQHJlYWN0LWVtYWlsL2NvbXBvbmVudHNgLlwiKTtcblx0fVxuXHRyZXR1cm4gcmVuZGVyJDEobm9kZSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9iYXRjaC9iYXRjaC50c1xudmFyIEJhdGNoID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0fVxuXHRhc3luYyBzZW5kKHBheWxvYWQsIG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gdGhpcy5jcmVhdGUocGF5bG9hZCwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMpIHtcblx0XHRjb25zdCBlbWFpbHMgPSBbXTtcblx0XHRmb3IgKGNvbnN0IGVtYWlsIG9mIHBheWxvYWQpIHtcblx0XHRcdGlmIChlbWFpbC5yZWFjdCkge1xuXHRcdFx0XHRlbWFpbC5odG1sID0gYXdhaXQgcmVuZGVyKGVtYWlsLnJlYWN0KTtcblx0XHRcdFx0ZW1haWwucmVhY3QgPSB2b2lkIDA7XG5cdFx0XHR9XG5cdFx0XHRlbWFpbHMucHVzaChwYXJzZUVtYWlsVG9BcGlPcHRpb25zKGVtYWlsKSk7XG5cdFx0fVxuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFwiL2VtYWlscy9iYXRjaFwiLCBlbWFpbHMsIHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFwieC1iYXRjaC12YWxpZGF0aW9uXCI6IG9wdGlvbnM/LmJhdGNoVmFsaWRhdGlvbiA/PyBcInN0cmljdFwiLFxuXHRcdFx0XHQuLi5vcHRpb25zPy5oZWFkZXJzXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9icm9hZGNhc3RzL2Jyb2FkY2FzdHMudHNcbnZhciBCcm9hZGNhc3RzID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0fVxuXHRhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0aWYgKHBheWxvYWQucmVhY3QpIHBheWxvYWQuaHRtbCA9IGF3YWl0IHJlbmRlcihwYXlsb2FkLnJlYWN0KTtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcIi9icm9hZGNhc3RzXCIsIHtcblx0XHRcdG5hbWU6IHBheWxvYWQubmFtZSxcblx0XHRcdHNlZ21lbnRfaWQ6IHBheWxvYWQuc2VnbWVudElkLFxuXHRcdFx0YXVkaWVuY2VfaWQ6IHBheWxvYWQuYXVkaWVuY2VJZCxcblx0XHRcdHByZXZpZXdfdGV4dDogcGF5bG9hZC5wcmV2aWV3VGV4dCxcblx0XHRcdGZyb206IHBheWxvYWQuZnJvbSxcblx0XHRcdGh0bWw6IHBheWxvYWQuaHRtbCxcblx0XHRcdHJlcGx5X3RvOiBwYXlsb2FkLnJlcGx5VG8sXG5cdFx0XHRzdWJqZWN0OiBwYXlsb2FkLnN1YmplY3QsXG5cdFx0XHR0ZXh0OiBwYXlsb2FkLnRleHQsXG5cdFx0XHR0b3BpY19pZDogcGF5bG9hZC50b3BpY0lkXG5cdFx0fSwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgc2VuZChpZCwgcGF5bG9hZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KGAvYnJvYWRjYXN0cy8ke2lkfS9zZW5kYCwgeyBzY2hlZHVsZWRfYXQ6IHBheWxvYWQ/LnNjaGVkdWxlZEF0IH0pO1xuXHR9XG5cdGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcblx0XHRjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvYnJvYWRjYXN0cz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9icm9hZGNhc3RzXCI7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuXHR9XG5cdGFzeW5jIGdldChpZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoYC9icm9hZGNhc3RzLyR7aWR9YCk7XG5cdH1cblx0YXN5bmMgcmVtb3ZlKGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShgL2Jyb2FkY2FzdHMvJHtpZH1gKTtcblx0fVxuXHRhc3luYyB1cGRhdGUoaWQsIHBheWxvYWQpIHtcblx0XHRpZiAocGF5bG9hZC5yZWFjdCkgcGF5bG9hZC5odG1sID0gYXdhaXQgcmVuZGVyKHBheWxvYWQucmVhY3QpO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChgL2Jyb2FkY2FzdHMvJHtpZH1gLCB7XG5cdFx0XHRuYW1lOiBwYXlsb2FkLm5hbWUsXG5cdFx0XHRzZWdtZW50X2lkOiBwYXlsb2FkLnNlZ21lbnRJZCxcblx0XHRcdGF1ZGllbmNlX2lkOiBwYXlsb2FkLmF1ZGllbmNlSWQsXG5cdFx0XHRmcm9tOiBwYXlsb2FkLmZyb20sXG5cdFx0XHRodG1sOiBwYXlsb2FkLmh0bWwsXG5cdFx0XHR0ZXh0OiBwYXlsb2FkLnRleHQsXG5cdFx0XHRzdWJqZWN0OiBwYXlsb2FkLnN1YmplY3QsXG5cdFx0XHRyZXBseV90bzogcGF5bG9hZC5yZXBseVRvLFxuXHRcdFx0cHJldmlld190ZXh0OiBwYXlsb2FkLnByZXZpZXdUZXh0LFxuXHRcdFx0dG9waWNfaWQ6IHBheWxvYWQudG9waWNJZFxuXHRcdH0pO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvY29tbW9uL3V0aWxzL3BhcnNlLWNvbnRhY3QtcHJvcGVydGllcy10by1hcGktb3B0aW9ucy50c1xuZnVuY3Rpb24gcGFyc2VDb250YWN0UHJvcGVydHlGcm9tQXBpKGNvbnRhY3RQcm9wZXJ0eSkge1xuXHRyZXR1cm4ge1xuXHRcdGlkOiBjb250YWN0UHJvcGVydHkuaWQsXG5cdFx0a2V5OiBjb250YWN0UHJvcGVydHkua2V5LFxuXHRcdGNyZWF0ZWRBdDogY29udGFjdFByb3BlcnR5LmNyZWF0ZWRfYXQsXG5cdFx0dHlwZTogY29udGFjdFByb3BlcnR5LnR5cGUsXG5cdFx0ZmFsbGJhY2tWYWx1ZTogY29udGFjdFByb3BlcnR5LmZhbGxiYWNrX3ZhbHVlXG5cdH07XG59XG5mdW5jdGlvbiBwYXJzZUNvbnRhY3RQcm9wZXJ0eVRvQXBpT3B0aW9ucyhjb250YWN0UHJvcGVydHkpIHtcblx0aWYgKFwia2V5XCIgaW4gY29udGFjdFByb3BlcnR5KSByZXR1cm4ge1xuXHRcdGtleTogY29udGFjdFByb3BlcnR5LmtleSxcblx0XHR0eXBlOiBjb250YWN0UHJvcGVydHkudHlwZSxcblx0XHRmYWxsYmFja192YWx1ZTogY29udGFjdFByb3BlcnR5LmZhbGxiYWNrVmFsdWVcblx0fTtcblx0cmV0dXJuIHsgZmFsbGJhY2tfdmFsdWU6IGNvbnRhY3RQcm9wZXJ0eS5mYWxsYmFja1ZhbHVlIH07XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9jb250YWN0LXByb3BlcnRpZXMvY29udGFjdC1wcm9wZXJ0aWVzLnRzXG52YXIgQ29udGFjdFByb3BlcnRpZXMgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHR9XG5cdGFzeW5jIGNyZWF0ZShvcHRpb25zKSB7XG5cdFx0Y29uc3QgYXBpT3B0aW9ucyA9IHBhcnNlQ29udGFjdFByb3BlcnR5VG9BcGlPcHRpb25zKG9wdGlvbnMpO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFwiL2NvbnRhY3QtcHJvcGVydGllc1wiLCBhcGlPcHRpb25zKTtcblx0fVxuXHRhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuXHRcdGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG5cdFx0Y29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2NvbnRhY3QtcHJvcGVydGllcz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9jb250YWN0LXByb3BlcnRpZXNcIjtcblx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuXHRcdGlmIChyZXNwb25zZS5kYXRhKSByZXR1cm4ge1xuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHQuLi5yZXNwb25zZS5kYXRhLFxuXHRcdFx0XHRkYXRhOiByZXNwb25zZS5kYXRhLmRhdGEubWFwKChhcGlDb250YWN0UHJvcGVydHkpID0+IHBhcnNlQ29udGFjdFByb3BlcnR5RnJvbUFwaShhcGlDb250YWN0UHJvcGVydHkpKVxuXHRcdFx0fSxcblx0XHRcdGhlYWRlcnM6IHJlc3BvbnNlLmhlYWRlcnMsXG5cdFx0XHRlcnJvcjogbnVsbFxuXHRcdH07XG5cdFx0cmV0dXJuIHJlc3BvbnNlO1xuXHR9XG5cdGFzeW5jIGdldChpZCkge1xuXHRcdGlmICghaWQpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIGZpZWxkLlwiLFxuXHRcdFx0XHRzdGF0dXNDb2RlOiBudWxsLFxuXHRcdFx0XHRuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoYC9jb250YWN0LXByb3BlcnRpZXMvJHtpZH1gKTtcblx0XHRpZiAocmVzcG9uc2UuZGF0YSkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IHtcblx0XHRcdFx0b2JqZWN0OiBcImNvbnRhY3RfcHJvcGVydHlcIixcblx0XHRcdFx0Li4ucGFyc2VDb250YWN0UHJvcGVydHlGcm9tQXBpKHJlc3BvbnNlLmRhdGEpXG5cdFx0XHR9LFxuXHRcdFx0aGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcblx0XHRcdGVycm9yOiBudWxsXG5cdFx0fTtcblx0XHRyZXR1cm4gcmVzcG9uc2U7XG5cdH1cblx0YXN5bmMgdXBkYXRlKHBheWxvYWQpIHtcblx0XHRpZiAoIXBheWxvYWQuaWQpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIGZpZWxkLlwiLFxuXHRcdFx0XHRzdGF0dXNDb2RlOiBudWxsLFxuXHRcdFx0XHRuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0Y29uc3QgYXBpT3B0aW9ucyA9IHBhcnNlQ29udGFjdFByb3BlcnR5VG9BcGlPcHRpb25zKHBheWxvYWQpO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChgL2NvbnRhY3QtcHJvcGVydGllcy8ke3BheWxvYWQuaWR9YCwgYXBpT3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgcmVtb3ZlKGlkKSB7XG5cdFx0aWYgKCFpZCkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRoZWFkZXJzOiBudWxsLFxuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0bWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKGAvY29udGFjdC1wcm9wZXJ0aWVzLyR7aWR9YCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9jb250YWN0cy9zZWdtZW50cy9jb250YWN0LXNlZ21lbnRzLnRzXG52YXIgQ29udGFjdFNlZ21lbnRzID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0fVxuXHRhc3luYyBsaXN0KG9wdGlvbnMpIHtcblx0XHRpZiAoIW9wdGlvbnMuY29udGFjdElkICYmICFvcHRpb25zLmVtYWlsKSByZXR1cm4ge1xuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGhlYWRlcnM6IG51bGwsXG5cdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBvciBgZW1haWxgIGZpZWxkLlwiLFxuXHRcdFx0XHRzdGF0dXNDb2RlOiBudWxsLFxuXHRcdFx0XHRuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0Y29uc3QgaWRlbnRpZmllciA9IG9wdGlvbnMuZW1haWwgPyBvcHRpb25zLmVtYWlsIDogb3B0aW9ucy5jb250YWN0SWQ7XG5cdFx0Y29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcblx0XHRjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvY29udGFjdHMvJHtpZGVudGlmaWVyfS9zZWdtZW50cz8ke3F1ZXJ5U3RyaW5nfWAgOiBgL2NvbnRhY3RzLyR7aWRlbnRpZmllcn0vc2VnbWVudHNgO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcblx0fVxuXHRhc3luYyBhZGQob3B0aW9ucykge1xuXHRcdGlmICghb3B0aW9ucy5jb250YWN0SWQgJiYgIW9wdGlvbnMuZW1haWwpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb25zdCBpZGVudGlmaWVyID0gb3B0aW9ucy5lbWFpbCA/IG9wdGlvbnMuZW1haWwgOiBvcHRpb25zLmNvbnRhY3RJZDtcblx0XHRyZXR1cm4gdGhpcy5yZXNlbmQucG9zdChgL2NvbnRhY3RzLyR7aWRlbnRpZmllcn0vc2VnbWVudHMvJHtvcHRpb25zLnNlZ21lbnRJZH1gKTtcblx0fVxuXHRhc3luYyByZW1vdmUob3B0aW9ucykge1xuXHRcdGlmICghb3B0aW9ucy5jb250YWN0SWQgJiYgIW9wdGlvbnMuZW1haWwpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb25zdCBpZGVudGlmaWVyID0gb3B0aW9ucy5lbWFpbCA/IG9wdGlvbnMuZW1haWwgOiBvcHRpb25zLmNvbnRhY3RJZDtcblx0XHRyZXR1cm4gdGhpcy5yZXNlbmQuZGVsZXRlKGAvY29udGFjdHMvJHtpZGVudGlmaWVyfS9zZWdtZW50cy8ke29wdGlvbnMuc2VnbWVudElkfWApO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvY29udGFjdHMvdG9waWNzL2NvbnRhY3QtdG9waWNzLnRzXG52YXIgQ29udGFjdFRvcGljcyA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocmVzZW5kKSB7XG5cdFx0dGhpcy5yZXNlbmQgPSByZXNlbmQ7XG5cdH1cblx0YXN5bmMgdXBkYXRlKHBheWxvYWQpIHtcblx0XHRpZiAoIXBheWxvYWQuaWQgJiYgIXBheWxvYWQuZW1haWwpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRjb25zdCBpZGVudGlmaWVyID0gcGF5bG9hZC5lbWFpbCA/IHBheWxvYWQuZW1haWwgOiBwYXlsb2FkLmlkO1xuXHRcdHJldHVybiB0aGlzLnJlc2VuZC5wYXRjaChgL2NvbnRhY3RzLyR7aWRlbnRpZmllcn0vdG9waWNzYCwgcGF5bG9hZC50b3BpY3MpO1xuXHR9XG5cdGFzeW5jIGxpc3Qob3B0aW9ucykge1xuXHRcdGlmICghb3B0aW9ucy5pZCAmJiAhb3B0aW9ucy5lbWFpbCkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRoZWFkZXJzOiBudWxsLFxuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0bWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcblx0XHRcdFx0c3RhdHVzQ29kZTogbnVsbCxcblx0XHRcdFx0bmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcblx0XHRcdH1cblx0XHR9O1xuXHRcdGNvbnN0IGlkZW50aWZpZXIgPSBvcHRpb25zLmVtYWlsID8gb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMuaWQ7XG5cdFx0Y29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcblx0XHRjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvY29udGFjdHMvJHtpZGVudGlmaWVyfS90b3BpY3M/JHtxdWVyeVN0cmluZ31gIDogYC9jb250YWN0cy8ke2lkZW50aWZpZXJ9L3RvcGljc2A7XG5cdFx0cmV0dXJuIHRoaXMucmVzZW5kLmdldCh1cmwpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvY29udGFjdHMvY29udGFjdHMudHNcbnZhciBDb250YWN0cyA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocmVzZW5kKSB7XG5cdFx0dGhpcy5yZXNlbmQgPSByZXNlbmQ7XG5cdFx0dGhpcy50b3BpY3MgPSBuZXcgQ29udGFjdFRvcGljcyh0aGlzLnJlc2VuZCk7XG5cdFx0dGhpcy5zZWdtZW50cyA9IG5ldyBDb250YWN0U2VnbWVudHModGhpcy5yZXNlbmQpO1xuXHR9XG5cdGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcblx0XHRpZiAoIXBheWxvYWQuYXVkaWVuY2VJZCkgcmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXCIvY29udGFjdHNcIiwge1xuXHRcdFx0dW5zdWJzY3JpYmVkOiBwYXlsb2FkLnVuc3Vic2NyaWJlZCxcblx0XHRcdGVtYWlsOiBwYXlsb2FkLmVtYWlsLFxuXHRcdFx0Zmlyc3RfbmFtZTogcGF5bG9hZC5maXJzdE5hbWUsXG5cdFx0XHRsYXN0X25hbWU6IHBheWxvYWQubGFzdE5hbWUsXG5cdFx0XHRwcm9wZXJ0aWVzOiBwYXlsb2FkLnByb3BlcnRpZXNcblx0XHR9LCBvcHRpb25zKTtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChgL2F1ZGllbmNlcy8ke3BheWxvYWQuYXVkaWVuY2VJZH0vY29udGFjdHNgLCB7XG5cdFx0XHR1bnN1YnNjcmliZWQ6IHBheWxvYWQudW5zdWJzY3JpYmVkLFxuXHRcdFx0ZW1haWw6IHBheWxvYWQuZW1haWwsXG5cdFx0XHRmaXJzdF9uYW1lOiBwYXlsb2FkLmZpcnN0TmFtZSxcblx0XHRcdGxhc3RfbmFtZTogcGF5bG9hZC5sYXN0TmFtZSxcblx0XHRcdHByb3BlcnRpZXM6IHBheWxvYWQucHJvcGVydGllc1xuXHRcdH0sIG9wdGlvbnMpO1xuXHR9XG5cdGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3Qgc2VnbWVudElkID0gb3B0aW9ucy5zZWdtZW50SWQgPz8gb3B0aW9ucy5hdWRpZW5jZUlkO1xuXHRcdGlmICghc2VnbWVudElkKSB7XG5cdFx0XHRjb25zdCBxdWVyeVN0cmluZyQxID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG5cdFx0XHRjb25zdCB1cmwkMSA9IHF1ZXJ5U3RyaW5nJDEgPyBgL2NvbnRhY3RzPyR7cXVlcnlTdHJpbmckMX1gIDogXCIvY29udGFjdHNcIjtcblx0XHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsJDEpO1xuXHRcdH1cblx0XHRjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuXHRcdGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9zZWdtZW50cy8ke3NlZ21lbnRJZH0vY29udGFjdHM/JHtxdWVyeVN0cmluZ31gIDogYC9zZWdtZW50cy8ke3NlZ21lbnRJZH0vY29udGFjdHNgO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcblx0fVxuXHRhc3luYyBnZXQob3B0aW9ucykge1xuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHRoaXMucmVzZW5kLmdldChgL2NvbnRhY3RzLyR7b3B0aW9uc31gKTtcblx0XHRpZiAoIW9wdGlvbnMuaWQgJiYgIW9wdGlvbnMuZW1haWwpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRpZiAoIW9wdGlvbnMuYXVkaWVuY2VJZCkgcmV0dXJuIHRoaXMucmVzZW5kLmdldChgL2NvbnRhY3RzLyR7b3B0aW9ucz8uZW1haWwgPyBvcHRpb25zPy5lbWFpbCA6IG9wdGlvbnM/LmlkfWApO1xuXHRcdHJldHVybiB0aGlzLnJlc2VuZC5nZXQoYC9hdWRpZW5jZXMvJHtvcHRpb25zLmF1ZGllbmNlSWR9L2NvbnRhY3RzLyR7b3B0aW9ucz8uZW1haWwgPyBvcHRpb25zPy5lbWFpbCA6IG9wdGlvbnM/LmlkfWApO1xuXHR9XG5cdGFzeW5jIHVwZGF0ZShvcHRpb25zKSB7XG5cdFx0aWYgKCFvcHRpb25zLmlkICYmICFvcHRpb25zLmVtYWlsKSByZXR1cm4ge1xuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGhlYWRlcnM6IG51bGwsXG5cdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBvciBgZW1haWxgIGZpZWxkLlwiLFxuXHRcdFx0XHRzdGF0dXNDb2RlOiBudWxsLFxuXHRcdFx0XHRuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0aWYgKCFvcHRpb25zLmF1ZGllbmNlSWQpIHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChgL2NvbnRhY3RzLyR7b3B0aW9ucz8uZW1haWwgPyBvcHRpb25zPy5lbWFpbCA6IG9wdGlvbnM/LmlkfWAsIHtcblx0XHRcdHVuc3Vic2NyaWJlZDogb3B0aW9ucy51bnN1YnNjcmliZWQsXG5cdFx0XHRmaXJzdF9uYW1lOiBvcHRpb25zLmZpcnN0TmFtZSxcblx0XHRcdGxhc3RfbmFtZTogb3B0aW9ucy5sYXN0TmFtZSxcblx0XHRcdHByb3BlcnRpZXM6IG9wdGlvbnMucHJvcGVydGllc1xuXHRcdH0pO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChgL2F1ZGllbmNlcy8ke29wdGlvbnMuYXVkaWVuY2VJZH0vY29udGFjdHMvJHtvcHRpb25zPy5lbWFpbCA/IG9wdGlvbnM/LmVtYWlsIDogb3B0aW9ucz8uaWR9YCwge1xuXHRcdFx0dW5zdWJzY3JpYmVkOiBvcHRpb25zLnVuc3Vic2NyaWJlZCxcblx0XHRcdGZpcnN0X25hbWU6IG9wdGlvbnMuZmlyc3ROYW1lLFxuXHRcdFx0bGFzdF9uYW1lOiBvcHRpb25zLmxhc3ROYW1lLFxuXHRcdFx0cHJvcGVydGllczogb3B0aW9ucy5wcm9wZXJ0aWVzXG5cdFx0fSk7XG5cdH1cblx0YXN5bmMgcmVtb3ZlKHBheWxvYWQpIHtcblx0XHRpZiAodHlwZW9mIHBheWxvYWQgPT09IFwic3RyaW5nXCIpIHJldHVybiB0aGlzLnJlc2VuZC5kZWxldGUoYC9jb250YWN0cy8ke3BheWxvYWR9YCk7XG5cdFx0aWYgKCFwYXlsb2FkLmlkICYmICFwYXlsb2FkLmVtYWlsKSByZXR1cm4ge1xuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGhlYWRlcnM6IG51bGwsXG5cdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBvciBgZW1haWxgIGZpZWxkLlwiLFxuXHRcdFx0XHRzdGF0dXNDb2RlOiBudWxsLFxuXHRcdFx0XHRuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0aWYgKCFwYXlsb2FkLmF1ZGllbmNlSWQpIHJldHVybiB0aGlzLnJlc2VuZC5kZWxldGUoYC9jb250YWN0cy8ke3BheWxvYWQ/LmVtYWlsID8gcGF5bG9hZD8uZW1haWwgOiBwYXlsb2FkPy5pZH1gKTtcblx0XHRyZXR1cm4gdGhpcy5yZXNlbmQuZGVsZXRlKGAvYXVkaWVuY2VzLyR7cGF5bG9hZC5hdWRpZW5jZUlkfS9jb250YWN0cy8ke3BheWxvYWQ/LmVtYWlsID8gcGF5bG9hZD8uZW1haWwgOiBwYXlsb2FkPy5pZH1gKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL2NvbW1vbi91dGlscy9wYXJzZS1kb21haW4tdG8tYXBpLW9wdGlvbnMudHNcbmZ1bmN0aW9uIHBhcnNlRG9tYWluVG9BcGlPcHRpb25zKGRvbWFpbikge1xuXHRyZXR1cm4ge1xuXHRcdG5hbWU6IGRvbWFpbi5uYW1lLFxuXHRcdHJlZ2lvbjogZG9tYWluLnJlZ2lvbixcblx0XHRjdXN0b21fcmV0dXJuX3BhdGg6IGRvbWFpbi5jdXN0b21SZXR1cm5QYXRoLFxuXHRcdGNhcGFiaWxpdGllczogZG9tYWluLmNhcGFiaWxpdGllc1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZG9tYWlucy9kb21haW5zLnRzXG52YXIgRG9tYWlucyA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocmVzZW5kKSB7XG5cdFx0dGhpcy5yZXNlbmQgPSByZXNlbmQ7XG5cdH1cblx0YXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFwiL2RvbWFpbnNcIiwgcGFyc2VEb21haW5Ub0FwaU9wdGlvbnMocGF5bG9hZCksIG9wdGlvbnMpO1xuXHR9XG5cdGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcblx0XHRjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvZG9tYWlucz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9kb21haW5zXCI7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuXHR9XG5cdGFzeW5jIGdldChpZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoYC9kb21haW5zLyR7aWR9YCk7XG5cdH1cblx0YXN5bmMgdXBkYXRlKHBheWxvYWQpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goYC9kb21haW5zLyR7cGF5bG9hZC5pZH1gLCB7XG5cdFx0XHRjbGlja190cmFja2luZzogcGF5bG9hZC5jbGlja1RyYWNraW5nLFxuXHRcdFx0b3Blbl90cmFja2luZzogcGF5bG9hZC5vcGVuVHJhY2tpbmcsXG5cdFx0XHR0bHM6IHBheWxvYWQudGxzLFxuXHRcdFx0Y2FwYWJpbGl0aWVzOiBwYXlsb2FkLmNhcGFiaWxpdGllc1xuXHRcdH0pO1xuXHR9XG5cdGFzeW5jIHJlbW92ZShpZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5kZWxldGUoYC9kb21haW5zLyR7aWR9YCk7XG5cdH1cblx0YXN5bmMgdmVyaWZ5KGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoYC9kb21haW5zLyR7aWR9L3ZlcmlmeWApO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZW1haWxzL2F0dGFjaG1lbnRzL2F0dGFjaG1lbnRzLnRzXG52YXIgQXR0YWNobWVudHMgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHR9XG5cdGFzeW5jIGdldChvcHRpb25zKSB7XG5cdFx0Y29uc3QgeyBlbWFpbElkLCBpZCB9ID0gb3B0aW9ucztcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KGAvZW1haWxzLyR7ZW1haWxJZH0vYXR0YWNobWVudHMvJHtpZH1gKTtcblx0fVxuXHRhc3luYyBsaXN0KG9wdGlvbnMpIHtcblx0XHRjb25zdCB7IGVtYWlsSWQgfSA9IG9wdGlvbnM7XG5cdFx0Y29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcblx0XHRjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvZW1haWxzLyR7ZW1haWxJZH0vYXR0YWNobWVudHM/JHtxdWVyeVN0cmluZ31gIDogYC9lbWFpbHMvJHtlbWFpbElkfS9hdHRhY2htZW50c2A7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZW1haWxzL3JlY2VpdmluZy9hdHRhY2htZW50cy9hdHRhY2htZW50cy50c1xudmFyIEF0dGFjaG1lbnRzJDEgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHR9XG5cdGFzeW5jIGdldChvcHRpb25zKSB7XG5cdFx0Y29uc3QgeyBlbWFpbElkLCBpZCB9ID0gb3B0aW9ucztcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KGAvZW1haWxzL3JlY2VpdmluZy8ke2VtYWlsSWR9L2F0dGFjaG1lbnRzLyR7aWR9YCk7XG5cdH1cblx0YXN5bmMgbGlzdChvcHRpb25zKSB7XG5cdFx0Y29uc3QgeyBlbWFpbElkIH0gPSBvcHRpb25zO1xuXHRcdGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG5cdFx0Y29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2VtYWlscy9yZWNlaXZpbmcvJHtlbWFpbElkfS9hdHRhY2htZW50cz8ke3F1ZXJ5U3RyaW5nfWAgOiBgL2VtYWlscy9yZWNlaXZpbmcvJHtlbWFpbElkfS9hdHRhY2htZW50c2A7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvZW1haWxzL3JlY2VpdmluZy9yZWNlaXZpbmcudHNcbnZhciBSZWNlaXZpbmcgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHRcdHRoaXMuYXR0YWNobWVudHMgPSBuZXcgQXR0YWNobWVudHMkMShyZXNlbmQpO1xuXHR9XG5cdGFzeW5jIGdldChpZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoYC9lbWFpbHMvcmVjZWl2aW5nLyR7aWR9YCk7XG5cdH1cblx0YXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcblx0XHRjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuXHRcdGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9lbWFpbHMvcmVjZWl2aW5nPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2VtYWlscy9yZWNlaXZpbmdcIjtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9lbWFpbHMvZW1haWxzLnRzXG52YXIgRW1haWxzID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0XHR0aGlzLmF0dGFjaG1lbnRzID0gbmV3IEF0dGFjaG1lbnRzKHJlc2VuZCk7XG5cdFx0dGhpcy5yZWNlaXZpbmcgPSBuZXcgUmVjZWl2aW5nKHJlc2VuZCk7XG5cdH1cblx0YXN5bmMgc2VuZChwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcblx0XHRyZXR1cm4gdGhpcy5jcmVhdGUocGF5bG9hZCwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuXHRcdGlmIChwYXlsb2FkLnJlYWN0KSBwYXlsb2FkLmh0bWwgPSBhd2FpdCByZW5kZXIocGF5bG9hZC5yZWFjdCk7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXCIvZW1haWxzXCIsIHBhcnNlRW1haWxUb0FwaU9wdGlvbnMocGF5bG9hZCksIG9wdGlvbnMpO1xuXHR9XG5cdGFzeW5jIGdldChpZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoYC9lbWFpbHMvJHtpZH1gKTtcblx0fVxuXHRhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuXHRcdGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG5cdFx0Y29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2VtYWlscz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9lbWFpbHNcIjtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG5cdH1cblx0YXN5bmMgdXBkYXRlKHBheWxvYWQpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goYC9lbWFpbHMvJHtwYXlsb2FkLmlkfWAsIHsgc2NoZWR1bGVkX2F0OiBwYXlsb2FkLnNjaGVkdWxlZEF0IH0pO1xuXHR9XG5cdGFzeW5jIGNhbmNlbChpZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KGAvZW1haWxzLyR7aWR9L2NhbmNlbGApO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvc2VnbWVudHMvc2VnbWVudHMudHNcbnZhciBTZWdtZW50cyA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocmVzZW5kKSB7XG5cdFx0dGhpcy5yZXNlbmQgPSByZXNlbmQ7XG5cdH1cblx0YXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFwiL3NlZ21lbnRzXCIsIHBheWxvYWQsIG9wdGlvbnMpO1xuXHR9XG5cdGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcblx0XHRjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvc2VnbWVudHM/JHtxdWVyeVN0cmluZ31gIDogXCIvc2VnbWVudHNcIjtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG5cdH1cblx0YXN5bmMgZ2V0KGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldChgL3NlZ21lbnRzLyR7aWR9YCk7XG5cdH1cblx0YXN5bmMgcmVtb3ZlKGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShgL3NlZ21lbnRzLyR7aWR9YCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9jb21tb24vdXRpbHMvZ2V0LXBhZ2luYXRpb24tcXVlcnktcHJvcGVydGllcy50c1xuZnVuY3Rpb24gZ2V0UGFnaW5hdGlvblF1ZXJ5UHJvcGVydGllcyhvcHRpb25zID0ge30pIHtcblx0Y29uc3QgcXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG5cdGlmIChvcHRpb25zLmJlZm9yZSkgcXVlcnkuc2V0KFwiYmVmb3JlXCIsIG9wdGlvbnMuYmVmb3JlKTtcblx0aWYgKG9wdGlvbnMuYWZ0ZXIpIHF1ZXJ5LnNldChcImFmdGVyXCIsIG9wdGlvbnMuYWZ0ZXIpO1xuXHRpZiAob3B0aW9ucy5saW1pdCkgcXVlcnkuc2V0KFwibGltaXRcIiwgb3B0aW9ucy5saW1pdC50b1N0cmluZygpKTtcblx0cmV0dXJuIHF1ZXJ5LnNpemUgPiAwID8gYD8ke3F1ZXJ5LnRvU3RyaW5nKCl9YCA6IFwiXCI7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9jb21tb24vdXRpbHMvcGFyc2UtdGVtcGxhdGUtdG8tYXBpLW9wdGlvbnMudHNcbmZ1bmN0aW9uIHBhcnNlVmFyaWFibGVzKHZhcmlhYmxlcykge1xuXHRyZXR1cm4gdmFyaWFibGVzPy5tYXAoKHZhcmlhYmxlKSA9PiAoe1xuXHRcdGtleTogdmFyaWFibGUua2V5LFxuXHRcdHR5cGU6IHZhcmlhYmxlLnR5cGUsXG5cdFx0ZmFsbGJhY2tfdmFsdWU6IHZhcmlhYmxlLmZhbGxiYWNrVmFsdWVcblx0fSkpO1xufVxuZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZVRvQXBpT3B0aW9ucyh0ZW1wbGF0ZSkge1xuXHRyZXR1cm4ge1xuXHRcdG5hbWU6IFwibmFtZVwiIGluIHRlbXBsYXRlID8gdGVtcGxhdGUubmFtZSA6IHZvaWQgMCxcblx0XHRzdWJqZWN0OiB0ZW1wbGF0ZS5zdWJqZWN0LFxuXHRcdGh0bWw6IHRlbXBsYXRlLmh0bWwsXG5cdFx0dGV4dDogdGVtcGxhdGUudGV4dCxcblx0XHRhbGlhczogdGVtcGxhdGUuYWxpYXMsXG5cdFx0ZnJvbTogdGVtcGxhdGUuZnJvbSxcblx0XHRyZXBseV90bzogdGVtcGxhdGUucmVwbHlUbyxcblx0XHR2YXJpYWJsZXM6IHBhcnNlVmFyaWFibGVzKHRlbXBsYXRlLnZhcmlhYmxlcylcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3RlbXBsYXRlcy9jaGFpbmFibGUtdGVtcGxhdGUtcmVzdWx0LnRzXG52YXIgQ2hhaW5hYmxlVGVtcGxhdGVSZXN1bHQgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHByb21pc2UsIHB1Ymxpc2hGbikge1xuXHRcdHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG5cdFx0dGhpcy5wdWJsaXNoRm4gPSBwdWJsaXNoRm47XG5cdH1cblx0dGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCkge1xuXHRcdHJldHVybiB0aGlzLnByb21pc2UudGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCk7XG5cdH1cblx0YXN5bmMgcHVibGlzaCgpIHtcblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnByb21pc2U7XG5cdFx0aWYgKGVycm9yKSByZXR1cm4ge1xuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGhlYWRlcnM6IG51bGwsXG5cdFx0XHRlcnJvclxuXHRcdH07XG5cdFx0cmV0dXJuIHRoaXMucHVibGlzaEZuKGRhdGEuaWQpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvdGVtcGxhdGVzL3RlbXBsYXRlcy50c1xudmFyIFRlbXBsYXRlcyA9IGNsYXNzIHtcblx0Y29uc3RydWN0b3IocmVzZW5kKSB7XG5cdFx0dGhpcy5yZXNlbmQgPSByZXNlbmQ7XG5cdH1cblx0Y3JlYXRlKHBheWxvYWQpIHtcblx0XHRyZXR1cm4gbmV3IENoYWluYWJsZVRlbXBsYXRlUmVzdWx0KHRoaXMucGVyZm9ybUNyZWF0ZShwYXlsb2FkKSwgdGhpcy5wdWJsaXNoLmJpbmQodGhpcykpO1xuXHR9XG5cdGFzeW5jIHBlcmZvcm1DcmVhdGUocGF5bG9hZCkge1xuXHRcdGlmIChwYXlsb2FkLnJlYWN0KSB7XG5cdFx0XHRpZiAoIXRoaXMucmVuZGVyQXN5bmMpIHRyeSB7XG5cdFx0XHRcdGNvbnN0IHsgcmVuZGVyQXN5bmMgfSA9IGF3YWl0IGltcG9ydChcIkByZWFjdC1lbWFpbC9yZW5kZXJcIik7XG5cdFx0XHRcdHRoaXMucmVuZGVyQXN5bmMgPSByZW5kZXJBc3luYztcblx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcmVuZGVyIFJlYWN0IGNvbXBvbmVudC4gTWFrZSBzdXJlIHRvIGluc3RhbGwgYEByZWFjdC1lbWFpbC9yZW5kZXJgXCIpO1xuXHRcdFx0fVxuXHRcdFx0cGF5bG9hZC5odG1sID0gYXdhaXQgdGhpcy5yZW5kZXJBc3luYyhwYXlsb2FkLnJlYWN0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMucmVzZW5kLnBvc3QoXCIvdGVtcGxhdGVzXCIsIHBhcnNlVGVtcGxhdGVUb0FwaU9wdGlvbnMocGF5bG9hZCkpO1xuXHR9XG5cdGFzeW5jIHJlbW92ZShpZGVudGlmaWVyKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShgL3RlbXBsYXRlcy8ke2lkZW50aWZpZXJ9YCk7XG5cdH1cblx0YXN5bmMgZ2V0KGlkZW50aWZpZXIpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KGAvdGVtcGxhdGVzLyR7aWRlbnRpZmllcn1gKTtcblx0fVxuXHRhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuXHRcdHJldHVybiB0aGlzLnJlc2VuZC5nZXQoYC90ZW1wbGF0ZXMke2dldFBhZ2luYXRpb25RdWVyeVByb3BlcnRpZXMob3B0aW9ucyl9YCk7XG5cdH1cblx0ZHVwbGljYXRlKGlkZW50aWZpZXIpIHtcblx0XHRyZXR1cm4gbmV3IENoYWluYWJsZVRlbXBsYXRlUmVzdWx0KHRoaXMucmVzZW5kLnBvc3QoYC90ZW1wbGF0ZXMvJHtpZGVudGlmaWVyfS9kdXBsaWNhdGVgKSwgdGhpcy5wdWJsaXNoLmJpbmQodGhpcykpO1xuXHR9XG5cdGFzeW5jIHB1Ymxpc2goaWRlbnRpZmllcikge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KGAvdGVtcGxhdGVzLyR7aWRlbnRpZmllcn0vcHVibGlzaGApO1xuXHR9XG5cdGFzeW5jIHVwZGF0ZShpZGVudGlmaWVyLCBwYXlsb2FkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKGAvdGVtcGxhdGVzLyR7aWRlbnRpZmllcn1gLCBwYXJzZVRlbXBsYXRlVG9BcGlPcHRpb25zKHBheWxvYWQpKTtcblx0fVxufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3RvcGljcy90b3BpY3MudHNcbnZhciBUb3BpY3MgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuXHRcdHRoaXMucmVzZW5kID0gcmVzZW5kO1xuXHR9XG5cdGFzeW5jIGNyZWF0ZShwYXlsb2FkKSB7XG5cdFx0Y29uc3QgeyBkZWZhdWx0U3Vic2NyaXB0aW9uLCAuLi5ib2R5IH0gPSBwYXlsb2FkO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFwiL3RvcGljc1wiLCB7XG5cdFx0XHQuLi5ib2R5LFxuXHRcdFx0ZGVmYXVsdF9zdWJzY3JpcHRpb246IGRlZmF1bHRTdWJzY3JpcHRpb25cblx0XHR9KTtcblx0fVxuXHRhc3luYyBsaXN0KCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoXCIvdG9waWNzXCIpO1xuXHR9XG5cdGFzeW5jIGdldChpZCkge1xuXHRcdGlmICghaWQpIHJldHVybiB7XG5cdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0aGVhZGVyczogbnVsbCxcblx0XHRcdGVycm9yOiB7XG5cdFx0XHRcdG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIGZpZWxkLlwiLFxuXHRcdFx0XHRzdGF0dXNDb2RlOiBudWxsLFxuXHRcdFx0XHRuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldChgL3RvcGljcy8ke2lkfWApO1xuXHR9XG5cdGFzeW5jIHVwZGF0ZShwYXlsb2FkKSB7XG5cdFx0aWYgKCFwYXlsb2FkLmlkKSByZXR1cm4ge1xuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGhlYWRlcnM6IG51bGwsXG5cdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBmaWVsZC5cIixcblx0XHRcdFx0c3RhdHVzQ29kZTogbnVsbCxcblx0XHRcdFx0bmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcblx0XHRcdH1cblx0XHR9O1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChgL3RvcGljcy8ke3BheWxvYWQuaWR9YCwgcGF5bG9hZCk7XG5cdH1cblx0YXN5bmMgcmVtb3ZlKGlkKSB7XG5cdFx0aWYgKCFpZCkgcmV0dXJuIHtcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRoZWFkZXJzOiBudWxsLFxuXHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0bWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgZmllbGQuXCIsXG5cdFx0XHRcdHN0YXR1c0NvZGU6IG51bGwsXG5cdFx0XHRcdG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG5cdFx0XHR9XG5cdFx0fTtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKGAvdG9waWNzLyR7aWR9YCk7XG5cdH1cbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy93ZWJob29rcy93ZWJob29rcy50c1xudmFyIFdlYmhvb2tzID0gY2xhc3Mge1xuXHRjb25zdHJ1Y3RvcihyZXNlbmQpIHtcblx0XHR0aGlzLnJlc2VuZCA9IHJlc2VuZDtcblx0fVxuXHRhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXCIvd2ViaG9va3NcIiwgcGF5bG9hZCwgb3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgZ2V0KGlkKSB7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMucmVzZW5kLmdldChgL3dlYmhvb2tzLyR7aWR9YCk7XG5cdH1cblx0YXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcblx0XHRjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuXHRcdGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC93ZWJob29rcz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi93ZWJob29rc1wiO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcblx0fVxuXHRhc3luYyB1cGRhdGUoaWQsIHBheWxvYWQpIHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goYC93ZWJob29rcy8ke2lkfWAsIHBheWxvYWQpO1xuXHR9XG5cdGFzeW5jIHJlbW92ZShpZCkge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnJlc2VuZC5kZWxldGUoYC93ZWJob29rcy8ke2lkfWApO1xuXHR9XG5cdHZlcmlmeShwYXlsb2FkKSB7XG5cdFx0cmV0dXJuIG5ldyBXZWJob29rKHBheWxvYWQud2ViaG9va1NlY3JldCkudmVyaWZ5KHBheWxvYWQucGF5bG9hZCwge1xuXHRcdFx0XCJzdml4LWlkXCI6IHBheWxvYWQuaGVhZGVycy5pZCxcblx0XHRcdFwic3ZpeC10aW1lc3RhbXBcIjogcGF5bG9hZC5oZWFkZXJzLnRpbWVzdGFtcCxcblx0XHRcdFwic3ZpeC1zaWduYXR1cmVcIjogcGF5bG9hZC5oZWFkZXJzLnNpZ25hdHVyZVxuXHRcdH0pO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvcmVzZW5kLnRzXG5jb25zdCBkZWZhdWx0QmFzZVVybCA9IFwiaHR0cHM6Ly9hcGkucmVzZW5kLmNvbVwiO1xuY29uc3QgZGVmYXVsdFVzZXJBZ2VudCA9IGByZXNlbmQtbm9kZToke3ZlcnNpb259YDtcbmNvbnN0IGJhc2VVcmwgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudiA/IHByb2Nlc3MuZW52LlJFU0VORF9CQVNFX1VSTCB8fCBkZWZhdWx0QmFzZVVybCA6IGRlZmF1bHRCYXNlVXJsO1xuY29uc3QgdXNlckFnZW50ID0gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5lbnYgPyBwcm9jZXNzLmVudi5SRVNFTkRfVVNFUl9BR0VOVCB8fCBkZWZhdWx0VXNlckFnZW50IDogZGVmYXVsdFVzZXJBZ2VudDtcbnZhciBSZXNlbmQgPSBjbGFzcyB7XG5cdGNvbnN0cnVjdG9yKGtleSkge1xuXHRcdHRoaXMua2V5ID0ga2V5O1xuXHRcdHRoaXMuYXBpS2V5cyA9IG5ldyBBcGlLZXlzKHRoaXMpO1xuXHRcdHRoaXMuc2VnbWVudHMgPSBuZXcgU2VnbWVudHModGhpcyk7XG5cdFx0dGhpcy5hdWRpZW5jZXMgPSB0aGlzLnNlZ21lbnRzO1xuXHRcdHRoaXMuYmF0Y2ggPSBuZXcgQmF0Y2godGhpcyk7XG5cdFx0dGhpcy5icm9hZGNhc3RzID0gbmV3IEJyb2FkY2FzdHModGhpcyk7XG5cdFx0dGhpcy5jb250YWN0cyA9IG5ldyBDb250YWN0cyh0aGlzKTtcblx0XHR0aGlzLmNvbnRhY3RQcm9wZXJ0aWVzID0gbmV3IENvbnRhY3RQcm9wZXJ0aWVzKHRoaXMpO1xuXHRcdHRoaXMuZG9tYWlucyA9IG5ldyBEb21haW5zKHRoaXMpO1xuXHRcdHRoaXMuZW1haWxzID0gbmV3IEVtYWlscyh0aGlzKTtcblx0XHR0aGlzLndlYmhvb2tzID0gbmV3IFdlYmhvb2tzKHRoaXMpO1xuXHRcdHRoaXMudGVtcGxhdGVzID0gbmV3IFRlbXBsYXRlcyh0aGlzKTtcblx0XHR0aGlzLnRvcGljcyA9IG5ldyBUb3BpY3ModGhpcyk7XG5cdFx0aWYgKCFrZXkpIHtcblx0XHRcdGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudikgdGhpcy5rZXkgPSBwcm9jZXNzLmVudi5SRVNFTkRfQVBJX0tFWTtcblx0XHRcdGlmICghdGhpcy5rZXkpIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgQVBJIGtleS4gUGFzcyBpdCB0byB0aGUgY29uc3RydWN0b3IgYG5ldyBSZXNlbmQoXFxcInJlXzEyM1xcXCIpYFwiKTtcblx0XHR9XG5cdFx0dGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoe1xuXHRcdFx0QXV0aG9yaXphdGlvbjogYEJlYXJlciAke3RoaXMua2V5fWAsXG5cdFx0XHRcIlVzZXItQWdlbnRcIjogdXNlckFnZW50LFxuXHRcdFx0XCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcblx0XHR9KTtcblx0fVxuXHRhc3luYyBmZXRjaFJlcXVlc3QocGF0aCwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVybH0ke3BhdGh9YCwgb3B0aW9ucyk7XG5cdFx0XHRpZiAoIXJlc3BvbnNlLm9rKSB0cnkge1xuXHRcdFx0XHRjb25zdCByYXdFcnJvciA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRcdGVycm9yOiBKU09OLnBhcnNlKHJhd0Vycm9yKSxcblx0XHRcdFx0XHRoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMocmVzcG9uc2UuaGVhZGVycy5lbnRyaWVzKCkpXG5cdFx0XHRcdH07XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0aWYgKGVyciBpbnN0YW5jZW9mIFN5bnRheEVycm9yKSByZXR1cm4ge1xuXHRcdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0XHRcdG5hbWU6IFwiYXBwbGljYXRpb25fZXJyb3JcIixcblx0XHRcdFx0XHRcdHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1cyxcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yLiBXZSBhcmUgdW5hYmxlIHRvIHByb2Nlc3MgeW91ciByZXF1ZXN0IHJpZ2h0IG5vdywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aGVhZGVyczogT2JqZWN0LmZyb21FbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb25zdCBlcnJvciA9IHtcblx0XHRcdFx0XHRtZXNzYWdlOiByZXNwb25zZS5zdGF0dXNUZXh0LFxuXHRcdFx0XHRcdHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1cyxcblx0XHRcdFx0XHRuYW1lOiBcImFwcGxpY2F0aW9uX2Vycm9yXCJcblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4ge1xuXHRcdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdFx0ZXJyb3I6IHtcblx0XHRcdFx0XHRcdC4uLmVycm9yLFxuXHRcdFx0XHRcdFx0bWVzc2FnZTogZXJyLm1lc3NhZ2Vcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGhlYWRlcnM6IE9iamVjdC5mcm9tRW50cmllcyhyZXNwb25zZS5oZWFkZXJzLmVudHJpZXMoKSlcblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRcdGVycm9yLFxuXHRcdFx0XHRcdGhlYWRlcnM6IE9iamVjdC5mcm9tRW50cmllcyhyZXNwb25zZS5oZWFkZXJzLmVudHJpZXMoKSlcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGRhdGE6IGF3YWl0IHJlc3BvbnNlLmpzb24oKSxcblx0XHRcdFx0ZXJyb3I6IG51bGwsXG5cdFx0XHRcdGhlYWRlcnM6IE9iamVjdC5mcm9tRW50cmllcyhyZXNwb25zZS5oZWFkZXJzLmVudHJpZXMoKSlcblx0XHRcdH07XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRlcnJvcjoge1xuXHRcdFx0XHRcdG5hbWU6IFwiYXBwbGljYXRpb25fZXJyb3JcIixcblx0XHRcdFx0XHRzdGF0dXNDb2RlOiBudWxsLFxuXHRcdFx0XHRcdG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGZldGNoIGRhdGEuIFRoZSByZXF1ZXN0IGNvdWxkIG5vdCBiZSByZXNvbHZlZC5cIlxuXHRcdFx0XHR9LFxuXHRcdFx0XHRoZWFkZXJzOiBudWxsXG5cdFx0XHR9O1xuXHRcdH1cblx0fVxuXHRhc3luYyBwb3N0KHBhdGgsIGVudGl0eSwgb3B0aW9ucyA9IHt9KSB7XG5cdFx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyk7XG5cdFx0aWYgKG9wdGlvbnMuaGVhZGVycykgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKS5lbnRyaWVzKCkpIGhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuXHRcdGlmIChvcHRpb25zLmlkZW1wb3RlbmN5S2V5KSBoZWFkZXJzLnNldChcIklkZW1wb3RlbmN5LUtleVwiLCBvcHRpb25zLmlkZW1wb3RlbmN5S2V5KTtcblx0XHRjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeShlbnRpdHkpLFxuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdGhlYWRlcnNcblx0XHR9O1xuXHRcdHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucyk7XG5cdH1cblx0YXN5bmMgZ2V0KHBhdGgsIG9wdGlvbnMgPSB7fSkge1xuXHRcdGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpO1xuXHRcdGlmIChvcHRpb25zLmhlYWRlcnMpIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycykuZW50cmllcygpKSBoZWFkZXJzLnNldChrZXksIHZhbHVlKTtcblx0XHRjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcblx0XHRcdG1ldGhvZDogXCJHRVRcIixcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRoZWFkZXJzXG5cdFx0fTtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuXHR9XG5cdGFzeW5jIHB1dChwYXRoLCBlbnRpdHksIG9wdGlvbnMgPSB7fSkge1xuXHRcdGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpO1xuXHRcdGlmIChvcHRpb25zLmhlYWRlcnMpIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycykuZW50cmllcygpKSBoZWFkZXJzLnNldChrZXksIHZhbHVlKTtcblx0XHRjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcblx0XHRcdG1ldGhvZDogXCJQVVRcIixcblx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KGVudGl0eSksXG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0aGVhZGVyc1xuXHRcdH07XG5cdFx0cmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKTtcblx0fVxuXHRhc3luYyBwYXRjaChwYXRoLCBlbnRpdHksIG9wdGlvbnMgPSB7fSkge1xuXHRcdGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpO1xuXHRcdGlmIChvcHRpb25zLmhlYWRlcnMpIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycykuZW50cmllcygpKSBoZWFkZXJzLnNldChrZXksIHZhbHVlKTtcblx0XHRjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcblx0XHRcdG1ldGhvZDogXCJQQVRDSFwiLFxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoZW50aXR5KSxcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRoZWFkZXJzXG5cdFx0fTtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuXHR9XG5cdGFzeW5jIGRlbGV0ZShwYXRoLCBxdWVyeSkge1xuXHRcdGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuXHRcdFx0bWV0aG9kOiBcIkRFTEVURVwiLFxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkocXVlcnkpLFxuXHRcdFx0aGVhZGVyczogdGhpcy5oZWFkZXJzXG5cdFx0fTtcblx0XHRyZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFJlc2VuZCB9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/resend/dist/index.mjs\n");

/***/ })

};
;